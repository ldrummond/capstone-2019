(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(t,e,n){t.exports=n.p+"static/media/car-cover.30e228da.png"},34:function(t,e,n){t.exports=n.p+"static/media/bat-cover.e832427f.png"},35:function(t,e,n){t.exports=n.p+"static/media/fish-cover.d0bbcd05.png"},36:function(t,e,n){t.exports=n.p+"static/media/crowd-cover.764e0200.png"},37:function(t,e,n){t.exports=n.p+"static/media/mold-cover.9a67b36c.png"},38:function(t,e,n){t.exports=n.p+"static/media/instructionPng.5d346955.png"},39:function(t,e,n){t.exports=n.p+"static/media/backgroundTest.8e71964e.jpg"},42:function(t,e,n){t.exports=n(61)},59:function(t,e,n){},61:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),s=n(19),a=n.n(s),r=n(64),c=n(2),l=n(3),u=n(6),h=n(4),m=n(5),p=n(10),d=n(11),f=n(20),v=n(33),y=n.n(v),g=n(34),b=n.n(g),w=n(35),x=n.n(w),E=n(36),C=n.n(E),S=n(37),k=n.n(S);function O(){return(O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var j=o.a.createElement("rect",{className:"shape",width:353.52,height:177.46});n.p;function N(){return(N=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var P=o.a.createElement("polygon",{className:"shape",points:"0 0 0 121.2 239.44 191.5 0 261.8 0 383 353.52 261.8 353.52 191.5 353.52 121.2 0 0"});n.p;function M(){return(M=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var T=o.a.createElement("polygon",{className:"shape",points:"0 0 0 121.2 239.44 191.5 0 261.8 0 383 353.52 261.8 353.52 191.5 353.52 121.2 0 0"});n.p;function q(){return(q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var B=o.a.createElement("polygon",{className:"shape",points:"0 0 0 121.2 239.44 191.5 0 261.8 0 383 353.52 261.8 353.52 191.5 353.52 121.2 0 0"});n.p;function V(){return(V=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var I=o.a.createElement("polygon",{className:"shape",points:"0 0 0 121.2 239.44 191.5 0 261.8 0 383 353.52 261.8 353.52 191.5 353.52 121.2 0 0"}),R=(n.p,{systems:[{path:"traffic",systemPart:"Cars",systemWhole:"Traffic",coverImage:{src:y.a},question:"What causes traffic?",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus sem eget tellus feugiat, quis efficitur neque tempor. Pellentesque ut dui a nisi porta pharetra quis sit amet mi. Quisque ac ante nulla. Quisque ut est cursus, sodales nulla eget, scelerisque nisl. Maecenas nec mollis velit. Donec viverra leo eget auctor ultricies. Nullam faucibus placerat orci, vel rhoncus velit auctor in. Cras at nibh quis massa feugiat lobortis nec eu quam.",rules:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus sem eget tellus feugiat, quis efficitur neque tempor.",instructions:"Navigate the lanes to get work.",color:"#A38E76",icon:function(t){return o.a.createElement("svg",O({className:"car-icon",viewBox:"0 0 353.52 177.46"},t),j)}},{path:"colony",systemPart:"Bats",systemWhole:"Colony",coverImage:{src:b.a},question:"How do bats coordinate their flight?",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus sem eget tellus feugiat, quis efficitur neque tempor. Pellentesque ut dui a nisi porta pharetra quis sit amet mi. Quisque ac ante nulla. Quisque ut est cursus, sodales nulla eget, scelerisque nisl. Maecenas nec mollis velit. Donec viverra leo eget auctor ultricies. Nullam faucibus placerat orci, vel rhoncus velit auctor in. Cras at nibh quis massa feugiat lobortis nec eu quam.",rules:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus sem eget tellus feugiat, quis efficitur neque tempor.",instructions:"Chase the fish to see how they follow their neighbors to avoid predators.",color:"#F7A558",icon:function(t){return o.a.createElement("svg",N({className:"bat-icon",viewBox:"0 0 353.52 383"},t),P)}},{path:"school",systemPart:"Fish",systemWhole:"School",coverImage:{src:x.a},question:"How do fish avoid predators?",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus sem eget tellus feugiat, quis efficitur neque tempor. Pellentesque ut dui a nisi porta pharetra quis sit amet mi. Quisque ac ante nulla. Quisque ut est cursus, sodales nulla eget, scelerisque nisl. Maecenas nec mollis velit. Donec viverra leo eget auctor ultricies. Nullam faucibus placerat orci, vel rhoncus velit auctor in. Cras at nibh quis massa feugiat lobortis nec eu quam.",rules:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus sem eget tellus feugiat, quis efficitur neque tempor.",instructions:"Chase the fish to see how they follow their neighbors, and avoid predators.",color:"#579CC6",icon:function(t){return o.a.createElement("svg",M({className:"bat-icon",viewBox:"0 0 353.52 383"},t),T)}},{path:"crowd",systemPart:"Person",systemWhole:"Crowd",coverImage:{src:C.a},question:"How do crowds navigate cities?",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus sem eget tellus feugiat, quis efficitur neque tempor. Pellentesque ut dui a nisi porta pharetra quis sit amet mi. Quisque ac ante nulla. Quisque ut est cursus, sodales nulla eget, scelerisque nisl. Maecenas nec mollis velit. Donec viverra leo eget auctor ultricies. Nullam faucibus placerat orci, vel rhoncus velit auctor in. Cras at nibh quis massa feugiat lobortis nec eu quam.      ",rules:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus sem eget tellus feugiat, quis efficitur neque tempor.",instructions:"Chase the fish to see how they follow their neighbors to avoid predators.",color:"#EFB2C5",icon:function(t){return o.a.createElement("svg",q({className:"bat-icon",viewBox:"0 0 353.52 383"},t),B)}},{path:"slime",systemPart:"Cell",systemWhole:"Mold",coverImage:{src:k.a},question:"How can mold solve a maze?",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus sem eget tellus feugiat, quis efficitur neque tempor. Pellentesque ut dui a nisi porta pharetra quis sit amet mi. Quisque ac ante nulla. Quisque ut est cursus, sodales nulla eget, scelerisque nisl. Maecenas nec mollis velit. Donec viverra leo eget auctor ultricies. Nullam faucibus placerat orci, vel rhoncus velit auctor in. Cras at nibh quis massa feugiat lobortis nec eu quam.",rules:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus sem eget tellus feugiat, quis efficitur neque tempor.",instructions:"Chase the fish to see how they follow their neighbors to avoid predators.",color:"#79857E",icon:function(t){return o.a.createElement("svg",V({className:"bat-icon",viewBox:"0 0 353.52 383"},t),I)}}]});function D(t){var e=this,n=t.startValue,i=void 0===n?0:n,o=t.endValue,s=void 0===o?1:o,a=t.durationMs,r=void 0===a?200:a,c=t.fps,l=void 0===c?60:c,u=t.onStep,h=t.onComplete,m=void 0===h?function(t){}:h;this.isDone=!1,this.stepCount=Math.floor(r/(1e3/l)),this.valueIncrement=(s-i)/this.stepCount,this.sinValueIncrement=Math.PI/this.stepCount,this.currentValue=i,this.currentSinValue=0,this.step=function(){e.currentSinValue+=e.sinValueIncrement,e.currentValue+=e.valueIncrement*Math.pow(Math.sin(e.currentSinValue),2)*2,e.currentSinValue<Math.PI?u(e.currentValue):(u(s),m(),e.isDone=!0)}}function F(t,e){if(e<0||e>=t.length)throw new RangeError("Array index is out of range.");return t[e<t.length-1?e+1:0]}function _(t,e){if(e<0||e>=t.length)throw new RangeError("Array index is out of range.");return t[e>0?e-1:t.length-1]}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t),i=Object.assign({},e);return Object.assign(n,i)}function Y(){return"rgb(".concat(255*Math.random()|0,", ").concat(255*Math.random()|0,", ").concat(255*Math.random()|0,")")}function A(t){return t*(Math.PI/180)}var W=R.systems.map(function(t,e){return t.index=e,t}),z=W.map(function(t){return t.path});function H(t){if(t<0||t>W.length)throw new RangeError("State index is out of range.");return{prevSystem:_(W,t),curSystem:W[t],nextSystem:F(W,t)}}function X(t){var e=t.curSystem.index,n=e>0?e-1:W.length-1;return Object(d.a)({},t,H(n))}function U(t){var e=t.curSystem.index,n=e<W.length-1?e+1:0;return Object(d.a)({},t,H(n))}function Q(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<z.length;n++)if(z[n]===e)return Object(d.a)({},t,H(n));return t}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"NEXT_SYSTEM":return U(t);case"PREV_SYSTEM":return X(t);case"SYSTEM_FROM_PATH":return Q(t,e.path);case"HIDE_ABOUT":return Object(d.a)({},t,{aboutVisible:!1});case"SHOW_ABOUT":return Object(d.a)({},t,{aboutVisible:!0});case"WHEEL_UP":return Object(d.a)({},X(t),{wheelIndex:t.wheelIndex+1});case"WHEEL_DOWN":return Object(d.a)({},U(t),{wheelIndex:t.wheelIndex-1});default:return t}}var G=n(63),J=n(67),Z=n(62);var K=Object(p.b)(function(t){return{aboutVisible:t.aboutVisible}},function(t){return{hideAbout:function(e){t({type:"HIDE_ABOUT"}),e.replace({search:""}),window.scrollTo(0,0)},showAbout:function(e){t({type:"SHOW_ABOUT"}),e.replace({search:"?about=true"})}}})(function(t){var e=t.history,n=t.aboutVisible,i=void 0!==n&&n,s=t.showAbout,a=t.hideAbout,r=t.match,c=void 0===r?{params:[""]}:r,l=o.a.createElement("svg",{className:"thin-arrow",viewBox:"0 0 35 13"},o.a.createElement("line",{className:"line",x1:"25",y1:"6.8",x2:"0.76",y2:"6.8"}),o.a.createElement("polyline",{className:"point",points:"8.19 0.38 0.76 6.8 8.19 13.23"})),u=c.params[0],h=o.a.createElement(Z.a,{className:"back-link",to:"/selector"},l,"Back");"selector"===u&&(h=o.a.createElement("span",null));var m="navbar",p=function(t){return s(e)};return i&&(m+=" light",p=function(t){return a(e)}),o.a.createElement("div",{className:m},h,o.a.createElement("button",{className:"about-link unbuttoned",onClick:p},"About"))}),tt=n(66),et=n(65),nt=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"page-wrapper"},"Loader Page")}}]),e}(i.Component);function it(){return(it=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var ot=o.a.createElement("polygon",{className:"st0",points:"40.5,19.7 20.5,0.7 0.5,19.7 0.5,33.5 14.5,20.3 14.5,64.7 15.5,64.7 25.5,64.7 26.5,64.7 26.5,20.3 40.5,33.5 "}),st=function(t){return o.a.createElement("svg",it({className:"arrowIcon",x:"0px",y:"0px",viewBox:"0 0 41 65.2"},t),ot)},at=(n.p,n(12)),rt=n(16),ct=n.n(rt),lt=n(41);function ut(t,e){this.x=t,this.y=e}var ht=function(t){function e(t){Object(c.a)(this,e);var n=t.center,i=t.size,o={colors:t.colors,center:n,size:i,sides:5,rotation:t.rotation};return Object(u.a)(this,Object(h.a)(e).call(this,o))}return Object(m.a)(e,t),e}(function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),this.updateTransitions=function(){e.transitions.length>0&&(e.transitions=e.transitions.filter(function(t){return t.step(),!t.isDone&&t}),e.hasChanged=!0)};for(var i=n.center,o=void 0===i?new ut(0,0):i,s=n.sides,a=void 0===s?3:s,r=n.size,l=void 0===r?50:r,u=n.rotation,h=void 0===u?0:u,m=n.colors,p=void 0===m?[]:m;p.length<a;)p.push(Y());this.sides=a,this.size=l,this.center=o,this.colors=p,this.rotation=h,this.hitBufferColors=this.generateHitBufferColors(),this.hitIndex=-1,this.triangles=this.getTrianglesPoints(),this.cursor=new ut(0,0),this.transitions=[],this.hasChanged=!0}return Object(l.a)(t,[{key:"rotateTo",value:function(t){this.rotation=t,this.triangles=this.getTrianglesPoints(),this.hasChanged=!0}},{key:"rotateToEase",value:function(t,e){var n=this,i=new D({startValue:this.rotation,endValue:t,durationMs:e,fps:60,onStep:function(t){n.rotation=t,n.triangles=n.getTrianglesPoints()}});this.transitions.push(i)}},{key:"generateHitBufferColors",value:function(){return Object(lt.a)(Array(this.sides)).map(function(t){return Y()})}},{key:"getTrianglesPoints",value:function(){for(var t,e,n,i,o,s=[],a=0;a<this.sides;a+=1)e=2*(a+1)*Math.PI/this.sides-A(this.rotation),i=2*(a+2)*Math.PI/this.sides-A(this.rotation),t=new ut(this.center.x+this.size*Math.cos(e),this.center.y+this.size*Math.sin(e)),n=new ut(this.center.x+this.size*Math.cos(i),this.center.y+this.size*Math.sin(i)),o=[this.center,t,n],s.push(o);return s}},{key:"resize",value:function(t){var e=this;return this.center=new ut(this.center.x*t.x,this.center.y*t.y),this.size*=t.x,this.triangles=this.getTrianglesPoints(),function(t,n,i){e.triangles.map(function(n,i){t.beginPath(),t.moveTo(n[0].x,n[0].y),t.fillStyle=e.colors[i],t.lineTo(n[1].x,n[1].y),t.lineTo(n[2].x,n[2].y),t.fill()})}}},{key:"drawHidden",value:function(t,e){e&&this.triangles.map(function(n,i){t.beginPath(),t.lineTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y),t.lineTo(n[2].x,n[2].y),t.fillStyle=e[i],t.strokeStyle=e[i],t.lineWidth=10,t.fill(),t.stroke(),t.closePath()})}},{key:"update",value:function(){this.updateTransitions()}},{key:"draw",value:function(t){var e=this;this.triangles.map(function(n,i){t.beginPath(),t.moveTo(n[0].x,n[0].y),t.fillStyle=e.colors[i],t.lineTo(n[1].x,n[1].y),t.lineTo(n[2].x,n[2].y),t.fill()}),this.hasChanged=!1}},{key:"shouldDraw",get:function(){return this.hasChanged}}]),t}()),mt=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(h.a)(e).call(this,t))).sizeCanvasRender=function(){n.dpr=window.devicePixelRatio||1,n.canvas.width=n.$canvas.width()*n.dpr,n.canvas.height=n.$canvas.height()*n.dpr,n.ctx=n.canvas.getContext("2d"),n.ctx.scale(n.dpr,n.dpr)},n.canvasRef=o.a.createRef(),n.canvas=void 0,n.ctx=void 0,n.hoistContext=t.hoistContext,n.hoistCanvas=t.hoistCanvas||function(){},n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.canvas=this.canvasRef.current,this.$canvas=ct()(this.canvas),this.sizeCanvasRender(),this.hoistContext(this.ctx),this.hoistCanvas(this.canvas)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.a.createElement("canvas",{ref:this.canvasRef,className:"canvas-base"})}}]),e}(i.Component),pt=function(){function t(e){var n=this;Object(c.a)(this,t),this.loop=function(){n.rafId=requestAnimationFrame(n.loop),n.now=Date.now(),n.elapsed=n.now-n.then,n.ticker+=n.increment,n.elapsed>n.fpsInterval&&(n.then=n.now-n.elapsed%n.fpsInterval,n.onStep())};var i=e.fps;this.fps=i,this.startLoop(),this.onStep=function(){}}return Object(l.a)(t,[{key:"startLoop",value:function(){this.fpsInterval=1e3/this.fps,this.then=Date.now(),this.startTime=this.then,this.ticker=0,this.increment=1,this.loop()}},{key:"stopLoop",value:function(){cancelAnimationFrame(this.rafId)}},{key:"changeFps",value:function(t){this.fps=t,this.stopLoop(),this.startLoop()}},{key:"step",value:function(){this.onStep(this.ticker)}}]),t}(),dt=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(h.a)(e).call(this,t))).state={width:void 0,height:void 0,mounted:!1},n.pentagonRef=o.a.createRef(),n.pentagonOptions={},n.canvasOptions={},n.colors=R.systems.map(function(t){return t.color}),n.hoistContext=function(t){n.ctx=t},console.log("constructed"),n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t,e,n=this;if(this.pentagonRef){console.log("mount"),this.pentagon=this.pentagonRef.current,this.width=ct()(this.pentagon).width(),this.height=ct()(this.pentagon).height(),this.center={x:this.width/2,y:this.height/2},this.wheelIndex=0;this.pentagonControllerOptions={center:this.center,size:(t=this.width/2,e=200,t>e?e:t),colors:this.colors,rotation:-72*this.wheelIndex+108},this.pentagonController=new ht(this.pentagonControllerOptions),this.rafController=new pt({fps:60}),this.rafController.onStep=function(t){n.ctx&&(n.pentagonController.update(),n.pentagonController.shouldDraw&&(n.ctx.clearRect(0,0,n.width,n.height),n.pentagonController.draw(n.ctx)))},this.setState({width:this.width,height:this.height,mounted:!0})}}},{key:"componentWillUpdate",value:function(t){console.log(),this.state.mounted&&(console.log("update mounted"),this.wheelIndex=t.wheelIndex,this.pentagonController.rotateToEase(-72*this.wheelIndex+108,666))}},{key:"render",value:function(){return o.a.createElement("span",{className:"pentagon-container",ref:this.pentagonRef},this.state.width&&this.state.height&&o.a.createElement(mt,{hoistContext:this.hoistContext}))}}]),e}(i.Component);function ft(t){var e=t.component,n=t.color,i=void 0===n?"red":n,s=t.onClick,a=void 0===s?function(t){}:s,r=t.style,c=void 0===r?{}:r;return o.a.createElement("span",{className:"svg-outline-container",onClick:a,style:c},o.a.createElement(e,{className:"svg-outline",style:{stroke:i}}),o.a.createElement("span",{className:"fill-container"},o.a.createElement(e,{className:"svg-fill",style:{fill:i}})))}var vt=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.props,e=t.curSystem,n=t.onPrevClick,i=t.onNextClick,s=t.wheelIndex;return o.a.createElement("div",{className:"page-wrapper selector-page"},o.a.createElement("span",{className:"content"},o.a.createElement(dt,Object.assign({},this.props,{wheelIndex:s})),o.a.createElement("span",{className:"arrows-container"},o.a.createElement(ft,{component:st,onClick:n,color:"black"}),o.a.createElement(ft,{component:st,onClick:i,color:"black",style:{transform:"rotate(180deg)"}})),o.a.createElement("span",{className:"option-container"},o.a.createElement(at.TransitionGroup,{component:null},o.a.createElement(at.CSSTransition,{key:e.path,timeout:{enter:333,exit:666},classNames:"rotate"},o.a.createElement(Z.a,{to:"/transition/".concat(e.path),className:"option-inner"},o.a.createElement("h1",{className:"title"},e.question),o.a.createElement("span",{className:"subtitle"},o.a.createElement("h4",null,"system"),o.a.createElement("h3",{className:"index"},e.index+1,"/5"))))))))}}]),e}(i.Component),yt=vt=Object(p.b)(function(t){return{nextSystem:t.nextSystem,curSystem:t.curSystem,prevSystem:t.prevSystem,wheelIndex:t.wheelIndex}},function(t){return{onPrevClick:function(e){t({type:"WHEEL_UP"})},onNextClick:function(e){t({type:"WHEEL_DOWN"})}}})(vt);function gt(){return(gt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var bt=o.a.createElement("polygon",{className:"p1",points:"46.32 227.47 193.96 227.47 120.32 126.47 46.32 227.47"}),wt=o.a.createElement("polygon",{className:"p2",points:"0.25 87.26 45.93 227.85 120.32 126.47 0.25 87.26"}),xt=o.a.createElement("polygon",{className:"p3",points:"193.96 227.47 240.39 87.26 120.32 126.47 193.96 227.47"}),Et=o.a.createElement("polygon",{className:"p4",points:"120.32 0 120.32 126.47 240.63 87.42 120.32 0"}),Ct=o.a.createElement("polygon",{className:"p5",points:"120.32 0 0 87.42 120.32 126.47 120.32 0"}),St=function(t){return o.a.createElement("svg",gt({className:"pentagonIcon",viewBox:"0 0 240.64 227.85"},t),bt,wt,xt,Et,Ct)},kt=(n.p,n(13)),Ot=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t);var n=e.boidCount,i=void 0===n?40:n,o=e.width,s=void 0===o?100:o,a=e.height,r=void 0===a?100:a,l=e.x,u=void 0===l?0:l,h=e.y,m=void 0===h?0:h;this.center=kt.a.vec2(s/2,r/2),this.boidPool=[],this.boidCount=i,this.width=s,this.height=r,this.x=u,this.y=m,this.state="flock",this.target=kt.a.vec2(0,0),this.chaser=kt.a.vec2(0,0),this.avoidDistance=80,this.initializeBoids()}return Object(l.a)(t,[{key:"initializeBoids",value:function(){for(var t,e=0;e<this.boidCount;e++)(t=new kt.a).edgeBehavior="bounce",t.setBounds(this.width,this.height,this.x,this.y),t.position.x=this.width/2*Math.random()+this.width/4,t.position.y=this.height/2*Math.random()+this.height/4,t.velocity.x=20*Math.random()-10,t.velocity.y=20*Math.random()-10,this.boidPool.push(t)}},{key:"distance",value:function(t,e){return Math.hypot(t.x-e.x,t.y-e.y)}},{key:"getUpdateFn",value:function(){var t=this;switch(this.state){case"flock":return function(e){return e.flock(t.boidPool).update()};case"school":return function(e){t.distance(e.position,t.chaser)<50?e.flee(t.chaser).update():t.distance(e.position,t.center)>.3*t.width?e.seek(t.center).update():e.flock(t.boidPool).update()};case"wander":default:return function(t){return t.wander().update()}}}},{key:"stepPool",value:function(){var t=this,e=function(t){return t.wander().update()};switch(this.state){case"flock":e=function(e){return e.flock(t.boidPool).update()};break;case"school":e=function(e){t.distance(e.position,t.chaser)<50?e.flee(t.chaser).update():e.flock(t.boidPool).update()};break;case"wander":default:e=function(t){return t.wander().update()}}this.boidPool.map(e)}},{key:"updateTarget",value:function(t,e){this.target=kt.a.vec2(t,e)}},{key:"updateChaser",value:function(t,e){this.chaser=kt.a.vec2(t,e)}},{key:"setStateFlee",value:function(){this.state="flee",this.boidPool.map(function(t){return t.maxSpeed=2})}},{key:"setStateSeek",value:function(){this.state="seek"}},{key:"setStateWander",value:function(){this.state="wander"}},{key:"setStateFlock",value:function(){this.state="flock"}},{key:"setStateBeach",value:function(){this.state="flock",this.boidPool.map(function(t){t.minDistance=100,t.maxSpeed=1})}},{key:"setStateSchool",value:function(){this.state="school",this.avoidDistance=80,this.boidPool.map(function(t){t.minDistance=30,t.mass=1,t.maxSpeed=3,t.maxForce=1,t.maxDistance=80})}},{key:"setBounds",value:function(t,e){this.boidPool.map(function(n){return n.setBounds(t,e)})}}]),t}(),jt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t);var n=e.color,i=(e.shape,e.width),o=e.clearFrames,s=e._x,a=void 0===s?-10:s,r=e._y,l=void 0===r?-10:r;this.mousePos={x:a,y:l},this.initialColor=n,this.width=i,this.clearFrames=o,this.boid=new kt.a,this.boid.position.x=500,this.boid.position.y=500,this.boid.maxSpeed=2,this.boid.velocity.x=1,this.boid.velocity.y=1,this.boid.edgeBehavior="EDGE_NONE",this.color="rgba(0, 0, 0, 0.3)",this.playing=!0}return Object(l.a)(t,[{key:"distance",value:function(t,e){return Math.hypot(t.x-e.x,t.y-e.y)}},{key:"update",value:function(){this.playing?this.boid.arrive(kt.a.vec2(this.mousePos.x,this.mousePos.y)).update():this.slowdown&&this.slowdown.step()}},{key:"pause",value:function(){var t=this;this.playing=!1,this.color="rgba(0, 0, 0, 0.3)",this.slowdown=new D({startValue:100,endValue:0,durationMs:666,onStep:function(e){t.boid.position.x+=t.boid.velocity.x*(e/100),t.boid.position.y+=t.boid.velocity.y*(e/100)}})}},{key:"play",value:function(){this.color=this.initialColor,this.playing=!0}},{key:"onClick",value:function(){}},{key:"draw",value:function(t){t.beginPath(),t.strokeStyle=this.color,t.lineWidth=this.width,t.moveTo(this.boid.position.x-3*this.boid.velocity.x,this.boid.position.y-3*this.boid.velocity.y),t.lineTo(this.boid.position.x+3*this.boid.velocity.x,this.boid.position.y+3*this.boid.velocity.y),t.stroke()}}]),t}(),Nt=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),this.updateBounds=function(t){t.x>e.maxX?e.maxX=t.x:t.x<e.minX&&(e.minX=t.x),t.y>e.maxY?e.maxY=t.y:t.y<e.minY&&(e.minY=t.y)};n.simulationType;var i=n.width,o=n.height,s=n.padding,a=void 0===s?{width:0,height:0}:s,r=n.boidSettings,l=n.cursorBoidSettings;this.createBounds(i,o,a),r.isVisible&&(this.createBoidPoolController(r),this.boidSettings=r,this.clearBoidFrames=r.clearFrames),l.isVisible&&(this.createCursorBoid(l),this.clearCursorFrames=l.clearFrames,this.cursorVisible=l.cursorVisible)}return Object(l.a)(t,[{key:"createBounds",value:function(t,e,n){this.bounds={x:n.width/2,y:n.height/2,width:t-n.width,height:e-n.height},this.activeBounds=this.bounds,this.minX=this.bounds.x+this.bounds.width,this.maxX=0,this.minY=this.bounds.y+this.bounds.height,this.maxY=0}},{key:"createBoidPoolController",value:function(t){this.boidPoolController=new Ot({boidCount:t.boidCount,maxSpeed:t.maxSpeed,width:this.bounds.width,height:this.bounds.height,x:this.bounds.x,y:this.bounds.y}),this.boidPoolController.setStateSchool()}},{key:"createCursorBoid",value:function(t){this.cursorController=new jt(L(t,{x:this.width/2,y:this.height/2}))}},{key:"resetBounds",value:function(){this.minX=this.bounds.x+this.bounds.width,this.maxX=0,this.minY=this.bounds.y+this.bounds.height,this.maxY=0}},{key:"drawBoid",value:function(t,e){t.moveTo(e.position.x-3*e.velocity.x,e.position.y-3*e.velocity.y),t.lineTo(e.position.x+3*e.velocity.x,e.position.y+3*e.velocity.y)}},{key:"step",value:function(t,e){var n=this;if(this.cursorController&&this.clearCursorFrames){var i=this.cursorController.boid;this.cursorController.mousePos;t.clearRect(i.position.x-20,i.position.y-20,40,40)}if(this.boidPoolController&&this.clearBoidFrames&&t.clearRect(this.activeBounds.x-20,this.activeBounds.y-20,this.activeBounds.width+40,this.activeBounds.height+40),this.cursorController){this.cursorController.update();var o=this.cursorController.boid;this.boidPoolController.updateChaser(o.position.x,o.position.y),this.cursorController.mousePos=e,this.cursorController.draw(t)}this.boidPoolController&&(this.updateFn=this.boidPoolController.getUpdateFn(),this.resetBounds(),t.strokeStyle=this.boidSettings.color,t.lineWidth=this.boidSettings.width,t.beginPath(),this.boidPoolController.boidPool.map(function(e){n.updateFn(e),n.updateBounds(e.position),n.drawBoid(t,e)}),t.stroke(),this.activeBounds={x:this.minX-15,y:this.minY-15,width:this.maxX-this.minX+30,height:this.maxY-this.minY+30})}},{key:"onClick",value:function(){this.cursorController.onClick()}},{key:"onMouseLeave",value:function(){this.cursorController&&this.cursorController.pause()}},{key:"onMouseEnter",value:function(){this.cursorController&&this.cursorController.play()}},{key:"resize",value:function(t){this.center={x:this.center.x*t.x,y:this.center.y*t.y},this.width*=t.x,this.height*=t.y,this.boidPoolController.setBounds(this.bounds.width,this.bounds.height,this.bounds.x,this.bounds.y)}},{key:"shouldDraw",value:function(){return!0}}]),t}(),Pt={simulationType:"traffic",rafSettings:{fps:60},simulationSettings:{cursorBoidSettings:{isVisible:!0,cursorVisible:!0,clearFrames:!0,color:"black",width:4},boidSettings:{isVisible:!0,clearFrames:!0,drawActiveBounds:!1,count:50,minSpeed:2,maxSpeed:5,shape:"line",color:"white",width:2}}},Mt={},Tt={},qt={},Bt={},Vt={},It=function(t){function e(t){var n;switch(Object(c.a)(this,e),(n=Object(u.a)(this,Object(h.a)(e).call(this,t))).onMouseMove=function(t){n.canvasRect&&n.rafController&&n.rafController.ticker%4==0&&(n.mousePos.x=t.clientX-n.canvasRect.left,n.mousePos.y=t.clientY-n.canvasRect.top)},n.onMouseClick=function(t){n.simulationController.onClick()},n.onMouseEnter=function(){n.simulationController.onMouseEnter()},n.onMouseLeave=function(){n.simulationController.onMouseLeave()},n.state={width:!1,height:!1},n.simulationType=t.path,n.simulationRef=o.a.createRef(),n.cursorIconRef=o.a.createRef(),n.hoistContext=function(t){n.ctx=t},n.hoistCanvas=function(t){n.canvas=t,n.canvasRect=n.canvas.getBoundingClientRect()},n.simulationType){case"traffic":n.currentSettings=L(Pt,Mt);case"colony":n.currentSettings=L(Pt,Tt);case"school":n.currentSettings=L(Pt,qt);case"crowds":n.currentSettings=L(Pt,Bt);case"slime":n.currentSettings=L(Pt,Vt)}return n.styles={cursor:n.currentSettings.simulationSettings.cursorBoidSettings.cursorVisible?"pointer":"none"},n.mousePos={x:100,y:100},n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"updateSimulationSettings",value:function(t){this.currentSettings=L(this.defaultSettings,t)}},{key:"createRaf",value:function(t){return new pt({fps:60})}},{key:"createSimulation",value:function(t){return new Nt({boidCount:t.boidCount,width:this.width,height:this.height,simulationType:t.simulationType,cursorBoidSettings:t.cursorBoidSettings,boidSettings:t.boidSettings})}},{key:"componentDidMount",value:function(){var t=this;this.simulationRef&&(this.simulation=this.simulationRef.current,this.$simulation=ct()(this.simulation),this.width=this.$simulation.width(),this.height=this.$simulation.height(),this.center={x:this.width/2,y:this.height/2},this.simRect=this.simulation.getBoundingClientRect(),this.rafController=this.createRaf(this.currentSettings.rafSettings),this.simulationController=this.createSimulation(this.currentSettings.simulationSettings),this.rafController.onStep=function(e){t.ctx&&t.simulationController.step(t.ctx,t.mousePos)},this.setState({width:this.width,height:this.height}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"simulation-canvas ".concat(this.props.path),ref:this.simulationRef,onMouseMove:this.onMouseMove,onClick:this.onMouseClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:this.styles},this.state.width&&this.state.height&&o.a.createElement(mt,{hoistContext:this.hoistContext,hoistCanvas:this.hoistCanvas}))}}]),e}(i.Component),Rt=n(38),Dt=n.n(Rt),Ft=n(18),_t=n(17),Lt=n.n(_t),Yt=(i.Component,i.Component,function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(h.a)(e).call(this,t))).state={showOverlay:!0},n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;setTimeout(function(e){t.setState({showOverlay:!1})},4e3)}},{key:"render",value:function(){var t=this.props,e=t.curSystem,n=void 0===e?{}:e,i=t.nextSystem,s=void 0===i?{}:i,a=(t.aboutVisible,t.onNextClick),r=n.index,c=void 0===r?0:r,l=n.question,u=void 0===l?"question":l,h=n.description,m=void 0===h?"description":h,p=n.rules,d=void 0===p?["test","test"]:p,f=n.path,v=void 0===f?"path":f,y=n.instructions,g=void 0===y?"Chase the fish to see how they follow their neighbors, and avoid predators.":y,b=n.color,w=void 0===b?"red":b,x=s.path,E=void 0===x?"test":x,C={background:w};this.state.mouseX,this.state.mouseY;return o.a.createElement("div",{className:"page-wrapper simulation-page ".concat(v),onMouseMove:this.onMouseMove},this.state.showOverlay&&o.a.createElement("span",{className:"overlay"},o.a.createElement("span",{className:"inner"},o.a.createElement("h3",{className:"title"},g),o.a.createElement("span",{className:"instruction-graphic"},o.a.createElement("img",{src:Dt.a})))),o.a.createElement("span",{className:"content"},o.a.createElement("section",{className:"description-panel"},o.a.createElement("span",null,o.a.createElement("h3",{className:"index"},c+1,"/5"),o.a.createElement("h2",{className:"question"},u)),o.a.createElement("span",null,o.a.createElement("span",{className:"line"}),o.a.createElement("h2",{className:"title"},"Emergent System"),o.a.createElement("h2",{className:"description"},m),o.a.createElement("h2",{className:"title"},"Rules"),o.a.createElement("h2",{className:"rules"},d),o.a.createElement(Z.a,{to:"/selector"},o.a.createElement(St,{style:{fill:"none",stroke:"black"}})))),o.a.createElement("span",{className:"simulation-panel",style:C},o.a.createElement(It,n),o.a.createElement("button",{className:"next-sim unbuttoned",onClick:a},o.a.createElement("h4",null,"next"),o.a.createElement("h3",null,E),o.a.createElement(ft,{component:st,color:"black",style:{transform:"rotate(180deg)"}})))))}}]),e}(i.Component)),At=Yt=Object(p.b)(function(t){return{nextSystem:t.nextSystem,curSystem:t.curSystem,aboutVisible:t.aboutVisible}},function(t){return{onNextClick:function(e){t({type:"NEXT_SYSTEM"})},onPrevClick:function(e){t({type:"PREV_SYSTEM"})},onPath:function(e){t({type:"SYSTEM_FROM_PATH",path:e})}}})(Yt),Wt=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.props.curSystem,e=(void 0===t?{}:t).path,n=void 0===e?"path":e;return o.a.createElement("div",{className:"page-wrapper transition-page ".concat(n)},o.a.createElement("span",{className:"content"},o.a.createElement(Z.a,{to:"/simulation/".concat(n),className:"next-button"},"NEXT")))}}]),e}(i.Component),zt=Wt=Object(p.b)(function(t){return{nextSystem:t.nextSystem,curSystem:t.curSystem,prevSystem:t.prevSystem}},function(t){return{onNextClick:function(e){t({type:"NEXT_SYSTEM"})},onPrevClick:function(e){t({type:"PREV_SYSTEM"})},onPath:function(e){t({type:"SYSTEM_FROM_PATH",path:e})}}})(Wt),Ht=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"page-wrapper no-match-page"})}}]),e}(i.Component);var Xt=function(t){var e=t.location;return t.history,o.a.createElement(at.TransitionGroup,{component:null},o.a.createElement(at.CSSTransition,{key:e.pathname,timeout:{enter:300,exit:300},classNames:"fade"},o.a.createElement(tt.a,{location:e},o.a.createElement(G.a,{path:"/home",component:nt}),o.a.createElement(G.a,{path:"/selector",component:yt}),o.a.createElement(G.a,{path:"/transition/:type",component:zt}),o.a.createElement(G.a,{path:"/simulation/:type",component:At}),o.a.createElement(et.a,{from:"/simulation",to:"/simulation/traffic"}),o.a.createElement(et.a,{from:"/",to:"selector"}),o.a.createElement(G.a,{component:Ht}))))},Ut={display:"block",transition:"opacity ".concat(300,"ms ease-in-out"),opacity:0},Qt={entered:{opacity:1,zIndex:10},exited:{pointerEvents:"none",zIndex:-5}},$t=function(t){function e(t){var n;return Object(c.a)(this,e),n=Object(u.a)(this,Object(h.a)(e).call(this,t)),t.history.listen(function(e,n){"POP"===n&&t.aboutVisible&&(t.hideSelf(),console.log(e))}),n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement(at.Transition,{in:Boolean(this.props.aboutVisible),timeout:{enter:0,exit:300},classNames:"toggle-about"},function(t){return o.a.createElement("div",{className:"about-overlay",style:Object(d.a)({},Ut,Qt[t])},o.a.createElement("span",{className:"content"},"About Page"))})}}]),e}(i.Component),Gt=$t=Object(p.b)(function(t){return{nextSystem:t.nextSystem,curSystem:t.curSystem,prevSystem:t.prevSystem,aboutVisible:t.aboutVisible}},function(t){return{onNextClick:function(e){t({type:"NEXT_SYSTEM"})},onPrevClick:function(e){t({type:"PREV_SYSTEM"})},hideSelf:function(e){t({type:"HIDE_ABOUT"})}}})($t),Jt=n(39),Zt=n.n(Jt);var Kt=Object(p.b)(function(t){return{curSystem:t.curSystem}})(function(t){var e=t.location,n=t.curSystem,s=void 0===n?{}:n;return o.a.createElement(at.TransitionGroup,{className:"background ".concat(e.pathname.split("/")[1])},o.a.createElement(at.CSSTransition,{key:s.coverImage.src,timeout:{enter:666,exit:333},classNames:"back"},o.a.createElement(G.a,{path:"/(selector|transition|simulation)",render:function(t){var e=s.coverImage,n=void 0===e?"":e,a=s.icon,r=s.color,c=a;return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("img",{className:"system-image",alt:"",src:n.src}),o.a.createElement(c,{className:"system-icon",style:{fill:r}})),o.a.createElement("img",{className:"texture",alt:"",src:Zt.a}))}})))}),te=function(t){function e(t){var n;Object(c.a)(this,e),n=Object(u.a)(this,Object(h.a)(e).call(this,t));var i,o=t.location.pathname.match(/\/(simulation|transition)\/([A-Za-z]+)/);o&&o.length>0&&"undefined"!=typeof o[2]&&(i=o[2]);var s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{search:""};return decodeURIComponent(t.search).slice(1).split("&").reduce(function(t,e){var n=e.split("=");return t[n[0]]=n[1],t},{})}(t.location);return n.store=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"traffic",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(f.b)($,Q({aboutVisible:e,wheelIndex:0},t))}(i,s.about),n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.props,e=t.location,n=t.history;return o.a.createElement(p.a,{store:this.store},o.a.createElement("div",{className:"app"},o.a.createElement(G.a,{path:"/(selector|transition|simulation|about)",component:K}),o.a.createElement(Gt,{location:e,history:n}),o.a.createElement(Xt,{location:e,history:n}),o.a.createElement(Kt,{location:e})))}}]),e}(i.Component),ee=Object(J.a)(te);n(59);var ne=function(){return o.a.createElement(r.a,null,o.a.createElement(ee,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[42,2,1]]]);
//# sourceMappingURL=main.8dd21cc1.chunk.js.map