{"version":3,"sources":["assets/car-icon.svg","assets/bat-icon.svg","assets/fish-icon.svg","assets/crowds-icon.svg","assets/mold-icon.svg","data/data.js","components/helperFunctions.js","redux/store.js","assets/arrow-small.svg","pages/navResolver.js","components/mobileRedirect.js","components/pentagonController.js","components/canvasBase.js","components/rafController.js","components/loaderPentagon.js","components/fadeWrapper.js","assets/pentagon.svg","pages/introPage.js","pages/aboutPage.js","assets/arrow.svg","assets/squiggle.svg","components/pentagonSvg.js","components/svgOutline.js","components/buttonWrapper.js","pages/selectorPage.js","pages/transitionPage.js","components/coloredPentagonSvg.js","simulations/boidPoolController.js","simulations/cursorBoidController.js","simulations/simulationController.js","simulations/settings/default.js","simulations/settings/traffic.js","simulations/settings/colony.js","simulations/settings/school.js","simulations/settings/crowds.js","simulations/settings/mold.js","assets/cave-top.svg","assets/cave-bottom.svg","simulations/simulationWrapper.js","pages/simulationPage.js","pages/mobilePage.js","pages/pageResolver.js","pages/backgroundResolver.js","pages/contentWrapper.js","App.js","serviceWorker.js","index.js","assets/background-texture-white.jpg","assets/car-cover.png","assets/bat-cover.png","assets/fish-cover.png","assets/crowds-cover.png","assets/mold-cover.png","assets/car-instructions.png","assets/bat-instructions.png","assets/fish-instructions.png","assets/crowds-instructions.png","assets/mold-instructions.png","assets/car-video.mp4","assets/bat-video.mp4","assets/fish-video.mp4","assets/crowds-video.mp4","assets/mold-video.mp4"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","car_icon_ref","react_default","a","createElement","car_icon_ref2","id","x","y","width","height","transform","__webpack_require__","p","bat_icon_extends","bat_icon_ref","bat_icon_ref2","points","fish_icon_extends","fish_icon_ref","fish_icon_ref2","cx","cy","rx","ry","crowds_icon_extends","crowds_icon_ref","crowds_icon_ref2","mold_icon_extends","mold_icon_ref","mold_icon_ref2","data","description","systems","path","nextButtonTitle","systemPart","systemWhole","coverImage","src","carCover","alt","previewVideo","carVideo","question","instructions","instructionPng","carInstructions","interactions","color","icon","props","viewBox","batCover","batVideo","batInstructions","fishCover","fishVideo","fishInstructions","crowdsCover","crowdsVideo","crowdsInstructions","moldCover","moldVideo","moldInstructions","CanvasTransition","_ref","_this","_ref$startValue","startValue","_ref$endValue","endValue","_ref$durationMs","durationMs","_ref$fps","fps","_ref$position","position","onStep","_ref$onComplete","onComplete","_","_ref$data","isDone","stepCount","Math","floor","valueIncrement","sinValueIncrement","PI","currentValue","currentSinValue","step","pow","sin","_len","args","Array","_key","concat","next","arr","RangeError","prev","ranRGB","random","toRad","angle","clamp","size","limit","min","squared","val","ActiveBounds","_this2","minX","maxX","minY","maxY","reset","update","pos","draw","ctx","padding","undefined","strokeRect","clear","clearRect","drawLerpLine","start","end","numPoints","magnitude","moveTo","Error","xUnit","yUnit","lineTo","map","system","index","paths","stateFromIndex","prevSystem","curSystem","nextSystem","wheelIndex","prevSystemState","state","curi","previ","objectSpread","nextSystemState","nexti","stateFromPath","initialState","prevLocation","prevWheelIndex","lastChange","Date","now","createStore","action","type","pageHasScrolled","arrow_small_extends","arrow_small_ref","className","x1","y1","x2","y2","arrow_small_ref2","arrow_small_SvgComponent","NavResolver","_Component","classCallCheck","possibleConstructorReturn","getPrototypeOf","handleScroll","e","window","scrollY","setState","prevState","hasScrolled","defineRoutes","pageIsAbout","pageIsMobile","_this$props","location","pathname","pageIsSimulation","split","pageIsTransition","pageIsSelector","titleLinkDestination","aboutLinkDestination","throttledHandleScroll","throttle","inherits","createClass","value","addEventListener","setHasScrolled","removeEventListener","classnames","scrolled","inactive","NavLink","to","onClick","scrollTo","replace","active","process","Component","connect","dispatch","ownProps","MobileRedirect","handleWindowSizeChange","innerWidth","resize","throttleResize","curLocation","locationIsMobile","locationShouldBeMobile","Switch","Redirect","from","withRouter","PolygonController","options","b","aCopy","bCopy","mergeObjects","Polygon","opts","updateTransitions","transitions","filter","transition","hasChanged","triangles","getTrianglesPoints","_opts$sides","sides","_opts$center","center","_opts$diameter","diameter","_opts$rotation","rotation","_opts$stroke","stroke","strokeStyle","_opts$strokeWidth","strokeWidth","_opts$fill","fill","_opts$hasNoise","fillStyle","hasNoise","_opts$colors","colors","_opts$amp","amp","_opts$freq","freq","_opts$smoothness","smoothness","lineWidth","push","cursor","hitIndex","hitBufferColors","generateHitBufferColors","toConsumableArray","deg","duration","rotateTransition","res","startDiameter","endDiameter","_this3","growTransition","startAngle","endAngle","_this4","_this5","startSides","endSides","_this6","startAlpha","endAlpha","_this7","fadeTransition","globalAlpha","startBrightness","endBrightness","_this8","curPoint","curAngle","nextPoint","nextAngle","triangle","cos","scale","_this9","mousePos","time","beginPath","tick","_this10","distanceFromMouse","hypot","round","Canvas","sizeCanvasRender","dpr","devicePixelRatio","canvas","$canvas","getContext","canvasRef","React","createRef","hoistCanvas","current","$","ref","PureComponent","cout","oneInNumber","_console","messages","console","log","RafController","loop","rafId","requestAnimationFrame","elapsed","then","ticker","increment","fpsInterval","startLoop","startTime","cancelAnimationFrame","stopLoop","PentagonWheel","mounted","pentagonRef","rafController","pentagon","pentagonOpts","pentagonController","PentagonController","canvasRect","shouldDraw","left","top","easeOpacity","easeDiameter","easeSides","stateIndex","easeAngleTo","canvasBase_Canvas","_canvas","_ctx","getBoundingClientRect","SimpleFade","_Component2","defaultStyle","delay","opacity","transitionStyles","entering","pointerEvents","entered","exiting","exited","_this$props2","children","_this$props2$duration","shouldRender","shouldUpdate","Transition_default","in","timeout","style","pentagon_extends","pentagon_ref","pentagon_ref2","pentagon_ref3","_ref4","_ref5","pentagon_SvgComponent","IntroPage","onMouseMove","clientX","clientY","handleClick","stateInterval","history","fadeDuration","setInterval","clearInterval","states","fadeWrapper_SimpleFade","loaderPentagon_PentagonWheel","background","qaText","header","copy","AboutPage","scrollTop","onScroll","href","text","CopyBlock","arrow_extends","arrow_ref","arrow_SvgComponent","squiggle_extends","squiggle_ref","d","squiggle_ref2","squiggle_SvgComponent","PentagonSvg","offset","onHoverUp","onHoverDown","onHoverOff","triAttributes","onEnter","plusI","curIndex","onPrevClick","onCenterClick","onNextClick","onMouseEnter","onMouseLeave","pentStyles","react_transition_group","classNames","SvgOutline","SvgComponent","component","_props$color","_props$onClick","_props$style","ButtonWrapper","hovering","hoverOff","SelectorPage","throttledPrevClick","throttledNextClick","destinationPath","pentagonSvg","buttonWrapper_ButtonWrapper","Arrow","enter","exit","Link","TransitionPage","setTimeout","clearTimeout","_this$props$curSystem","_curSystem$path","ColoredPentagonSvg","BoidPoolController","boid","_opts$simulationType","simulationType","_opts$count","count","bounds","_opts$maxSpeed","maxSpeed","_opts$maxForce","maxForce","_opts$maxDistance","maxDistance","_opts$minDistance","minDistance","_opts$avoidDistance","avoidDistance","_opts$arriveThreshold","arriveThreshold","_opts$mass","mass","initFn","updateFn","clickFn","_opts$edgeBehavior","edgeBehavior","Boid","vec2","chaser","boidPool","otherBoidPool","velocity","setBounds","wander","userData","splice","newBoid","newBoidPool","sampleBoid","CursorBoidController","updateBounds","clearFrames","drawFn","initBoid","initialColor","clickBuffer","drawBuffer","activeBounds","playing","_ref$maxSpeed","slowdown","shift","drawable","SimulationController","_options$x","_options$y","boidSettings","cursorBoidSettings","caveContainer","createBoidPoolController","createCursorBoid","isVisible","boidPoolController","clearBoidFrames","boidDrawFn","clickbufferDrawFn","drawActiveBounds","cursorController","clearCursorFrames","cursorVisible","drawCursorBounds","updateChaser","settings","getUpdateFn","strokeColor","fillColor","updateAndDrawCursor","updateOtherBoids","updateAndDrawBoids","updateBoidCount","newBounds","cursorBoidController","settings_default","rafSettings","simulationSettings","ripple","minSpeed","shape","settingsFps","traffic","per","arc","_ref2","closestLaneX","getClosestLane","lanes","laneWidth","abs","arrive","obstacle","heightUnit","lanesTotal","_ref3","allBoids","xDiff","closestBoid","laneBoids","otherBoid","aheadBoids","closestDist","totalWidth","laneX","colony","yDiff","yPos","ripple1","ripple2","yTranslate","minTranslate","heightRange","heightScale","adjustedScale","caveTop","caveBottom","obstacleScale","radius","obstacleA","obstacleB","aDist","distanceSq","bDist","flee","followPath","point","flock","p1","p2","p3","school","seek","vX","vY","ellipse","crowds","movingClockwise","reverse","mold","close","neighborPos","foodBoid","pheremoneDist","otherBoidDrawFn","cave_top_extends","cave_top_ref","cave_top_SvgComponent","cave_bottom_extends","cave_bottom_ref","cave_bottom_SvgComponent","SimulationWrapper","onMouseClick","simulationController","handleCrowdClick","simRect","simulation","simulationRef","cursorIconRef","caveRef","throttledCrowdClick","buildSimulation","currentSettings","deepmerge","defaultSettings","trafficSettings","colonySettings","schoolSettings","crowdsSettings","moldSettings","error","has","prevProps","styles","crowdsRef","SimulationPage","handleOverlayClick","overlayTimeout","hideOverlay","handleQuestionClick","_this$props$nextSyste","_curSystem$question","_curSystem$instructio","_nextSystem$nextButto","interaction","v","overlay-hidden","simulationWrapper_SimulationWrapper","onPath","MobilePage","onSystemAboutClick","systemAlreadyOpen","openSystemId","dangerouslySetInnerHTML","__html","isOpen","open","autoPlay","muted","transitionDelay","routes","name","prevPath","Fragment","mobileRedirect","Route","exact","match","unmountOnExit","BackgroundResolver","render","_curSystem$coverImage","Icon","ContentWrapper","simulationPath","matches","updateCurrentSystem","nextProps","updatePrevLocation","navResolver","pageResolver","backgroundResolver","App","HashRouter","es","store","contentWrapper","Boolean","hostname","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.e6d21227.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"sim-icons\");\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"traffic-icon\"\n}, React.createElement(\"rect\", {\n  x: -16.68,\n  y: 52,\n  width: 388,\n  height: 290,\n  transform: \"translate(374.32 19.68) rotate(90)\"\n}));\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 353.71 388.3\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/car-icon.e5c35e8b.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"sim-icons\");\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"colony-icon\"\n}, React.createElement(\"polygon\", {\n  points: \"0 0 0 122.78 239.35 194 0 265.22 0 388 353.39 265.22 353.39 194 353.39 122.78 0 0\"\n}));\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 353.71 388.3\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/bat-icon.c7398b9f.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"sim-icons\");\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"school-icon\"\n}, React.createElement(\"ellipse\", {\n  cx: 176.82,\n  cy: 194.27,\n  rx: 163.5,\n  ry: 194\n}));\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 353.71 388.3\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/fish-icon.1e030335.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"sim-icons\");\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"crowds-icon\"\n}, React.createElement(\"polygon\", {\n  points: \"353.39 387.82 -0.61 188.55 -0.61 -0.28 353.39 198.99 353.39 387.82\"\n}));\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 353.71 388.3\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/crowds-icon.5a8832cf.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"sim-icons\");\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"rect\", {\n  x: 51.94,\n  y: 70.85,\n  width: 248.9,\n  height: 248.9,\n  transform: \"translate(-86.43 181.93) rotate(-45)\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    id: \"mold-icon\",\n    viewBox: \"0 0 353.71 388.3\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/mold-icon.a36aa6f9.svg\";\nexport { SvgComponent as ReactComponent };","import carCover from '../assets/car-cover.png';\nimport batCover from '../assets/bat-cover.png';\nimport fishCover from '../assets/fish-cover.png';\nimport crowdsCover from '../assets/crowds-cover.png';\nimport moldCover from '../assets/mold-cover.png';\n\nimport carInstructions from '../assets/car-instructions.png';\nimport batInstructions from '../assets/bat-instructions.png';\nimport fishInstructions from '../assets/fish-instructions.png';\nimport crowdsInstructions from '../assets/crowds-instructions.png';\nimport moldInstructions from '../assets/mold-instructions.png';\n\nimport carVideo from '../assets/car-video.mp4';\nimport batVideo from '../assets/bat-video.mp4';\nimport fishVideo from '../assets/fish-video.mp4';\nimport crowdsVideo from '../assets/crowds-video.mp4';\nimport moldVideo from '../assets/mold-video.mp4';\n\nimport { ReactComponent as carIcon } from '../assets/car-icon.svg';\nimport { ReactComponent as batIcon } from '../assets/bat-icon.svg';\nimport { ReactComponent as fishIcon }  from '../assets/fish-icon.svg';\nimport { ReactComponent as crowdsIcon }  from '../assets/crowds-icon.svg';\nimport { ReactComponent as moldIcon }  from '../assets/mold-icon.svg';\n\nconst \n  trafficColor = '#a7a7b7',\n  batColor = '#F7A558',\n  fishColor = '#579CC6',\n  crowdsColor = '#e5aabf', //'#f4adc3',\n  moldColor = '#709b70'; //'#79857E';\n\n// \"Each simulation presents simple components interacting to form a complex pattern\"\n\nexport default {\n  description:\n    `Ever wonder what causes a traffic jam? Why fish swim in schools? How crowds move through cities? \n     <div class='break'></div>\n     Surprisingly, these systems are all connected  they are all examples of <em>emergence</em>, \n     where a complex pattern occurs through simple interactions between parts.<div class='break'></div>\n     This project explores the way emergent systems form throughout our world, looking at these systems\n     through 5 interactive simulations revolving around seemingly unrelated questions.`\n  ,\n  systems: [\n    {\n      path: \"traffic\", \n      nextButtonTitle: \"Traffic\",\n      systemPart: \"Cars\", \n      systemWhole: \"Traffic\", \n      coverImage: {\n        src: carCover, \n        alt: 'Car'\n      },\n      previewVideo: {\n        src: carVideo,\n      },\n      question: \"What causes traffic to form?\", \n      instructions: `Click your cursor to create a slowdown and see how drivers respond.`,\n      instructionPng: carInstructions,\n      interactions: [\n        \"Each car is in a rush and staying as close to the next car as possible, ignoring the cars behind it.\",\n        \"Because of this, if one car slows down, there is a chain reaction where each car reacts to the one in front.\",\n        `Each car adjusts its speed, but the slowdown stays in place, sometimes even moving traveling backwards\n        after the intial cars have sped on.`\n      ],\n      color: trafficColor,\n      icon: carIcon, \n    },\n    {\n      path: \"colony\", \n      nextButtonTitle: \"Bats\",\n      systemPart: \"Bats\", \n      systemWhole: \"Colony\", \n      coverImage: {\n        src: batCover, \n        alt: 'Bat'\n      },\n      previewVideo: {\n        src: batVideo,\n      },\n      question: \"Why do bats coordinate their flight?\", \n      instructions: \"Click on the walls of the cave to adjust the height of the opening.\",\n      instructionPng: batInstructions,\n      interactions: [\n        \"Each bat has highly powerful sensing abilities for tracking the distance between it and its neighbors.\",\n        `By adjusting its speed and position, each bat maintains a precise amount of space from its neighbors, \n        even the ones behind it.`,\n        `This allows the bats to fly as a unit, rapidly modifying their distance for the amount of available space: \n        and never getting into traffic jams or collisions.`\n      ],\n      color: batColor,\n      icon: batIcon, \n    },\n    {\n      path: \"school\", \n      nextButtonTitle: \"Fish\",\n      systemPart: \"Fish\", \n      systemWhole: \"School\", \n      coverImage: {\n        src: fishCover, \n        alt: 'Fish'\n      },\n      previewVideo: {\n        src: fishVideo,\n      },\n      question: \"How do fish avoid predators?\", \n      instructions: \"Move your cursor to guide a predator towards the school of fish.\",\n      instructionPng: fishInstructions,\n      interactions: [\n        \"Each fish is only aware of its close neighbors. It turns and slows to match their speed and angle.\",\n        \"When a predator attacks, only the closest fish can actually see and respond to the predator.\",\n        `When these fish turn, the other fish respond to their motion, and the whole school moves as a unit \n        overwhelming the predator.`\n      ],\n      color: fishColor,\n      icon: fishIcon, \n    },\n    {\n      path: \"crowds\", \n      nextButtonTitle: \"Crowds\",\n      systemPart: \"Person\", \n      systemWhole: \"Crowds\", \n      coverImage: {\n        src: crowdsCover, \n        alt: 'crowd_crossing_street'\n      },\n      previewVideo: {\n        src: crowdsVideo,\n      },\n      question: \"How do crowds interact in cities?\", \n      instructions: \"Click the buttons to change the number of people and affect the interactions of the crowds.\", \n      instructionPng: crowdsInstructions,\n      interactions: [\n        \"Each person travels at a similar pace towards their destination.\",\n        \"As they travel, they colliding with neighbors and people traveling in opposite directions.\",\n        \"As the crowds pass, lanes of efficient motion naturally form and grow.\"\n      ],\n      color: crowdsColor,\n      icon: crowdsIcon, \n    },\n    {\n      path: \"mold\", \n      nextButtonTitle: \"Mold\",\n      systemPart: \"Cell\", \n      systemWhole: \"Mold\", \n      coverImage: {\n        src: moldCover, \n        alt: 'mold_colony'\n      },\n      previewVideo: {\n        src: moldVideo,\n      },\n      question: \"How can mold build a network?\", \n      instructions: \"Click your cursor to place 5 food sources, guiding the mold network\",\n      instructionPng: moldInstructions,\n      interactions: [\n        \"Each mold cell is brainless, but in the presence of food, they release pheremones.\",\n        \"Other mold cells are attracted to those pheremones - when they get close, they strengthen the pheremone trail.\",\n        \"As the trails refine, the mold cells build an efficient network between multiple food sources.\"\n      ],\n      color: moldColor,\n      icon: moldIcon, \n    },\n  ],\n}","\n//////////////////////////////////////////////////\n//\n// Easing Functions\n// https://github.com/danro/jquery-easing/blob/master/jquery.easing.js\n// https://hackernoon.com/writing-an-easing-function-a-slightly-interesting-story-70ce667c212a\n//\n//////////////////////////////////////////////////\n\n/**\n * \n * @function CanvasTransition\n * @param {Object} Options\n * @property {number} startValue \n * @property {number} endValue\n * @property {number} durationMs\n * @property {number} fps\n * @callback {function} onStep\n * @callback {function} onComplete  \n * \n */\nexport function CanvasTransition({\n  startValue = 0, \n  endValue = 1, \n  durationMs = 200, \n  fps = 60, \n  position = {x: 0, y: 0}, \n  onStep, \n  onComplete = _ => {},\n  data = {},\n}) \n{\n  this.data = data;\n  this.position = position; \n  this.isDone = false; \n  \n  this.stepCount = Math.floor(durationMs / (1000 / fps));\n  this.valueIncrement = (endValue - startValue) / this.stepCount;\n  this.sinValueIncrement = Math.PI / this.stepCount;\n  \n  this.currentValue = startValue;\n  this.currentSinValue = 0;\n  \n  this.step = (...args) => {\n    this.currentSinValue += this.sinValueIncrement;\n    this.currentValue += this.valueIncrement * (Math.sin(this.currentSinValue) ** 2) * 2;\n    \n    if (this.currentSinValue < Math.PI) {\n      onStep(this.currentValue, ...args);\n    } else {\n      onStep(endValue, ...args);\n      onComplete();\n      this.isDone = true; \n    }\n  }\n}\n\n//////////////////////////////////////////////////\n//\n// Url Functions\n//\n//////////////////////////////////////////////////\n\n/*\n* Get url params.\n*/\nexport function getQueryParamsFromLocation(location = {search: \"\"}) {\n  let search = decodeURIComponent(location.search); \n  return search.slice(1).split('&').reduce((acc, query) => {\n    let q = query.split('=');\n    acc[q[0]] = q[1]\n    return acc;\n  }, {})\n}\n\n//////////////////////////////////////////////////\n//\n// Array Functions\n//\n//////////////////////////////////////////////////\n\n/**\n* @param {Array} array\n* @param {any} value\n* @returns {boolean} True if array contains value\n*/\nexport function contains(arr, val) {\n  return !(arr.indexOf(val) === -1)\n}\n\n/*\n* Array Next\n*/\nexport function next(arr, i) {\n  if(i < 0 || i >= arr.length) {throw new RangeError(\"Array index is out of range.\")}\n  let nexti = (i < arr.length - 1) ? i + 1 : 0; \n  return arr[nexti]; \n}\n\n/*\n* Array Prev\n*/\nexport function prev(arr, i) {\n  if(i < 0 || i >= arr.length) {throw new RangeError(\"Array index is out of range.\")}\n  let previ = (i > 0) ? i - 1 : arr.length - 1; \n  return arr[previ]; \n}\n\n//////////////////////////////////////////////////\n//\n// Object Functions\n//\n//////////////////////////////////////////////////\n\n/*\n* Merge objects\n*/\nexport function mergeObjects(a = {}, b = {}) {\n  let aCopy = Object.assign({}, a);\n  let bCopy = Object.assign({}, b);\n  return Object.assign(aCopy, bCopy)\n}\n\n//////////////////////////////////////////////////\n//\n// Color Functions\n//\n//////////////////////////////////////////////////\n\n/*\n* Ran RGB \n*/\nexport function ranRGB() {\n  return `rgb(${255 * Math.random()|0}, ${255 * Math.random()|0}, ${255 * Math.random()|0})`;\n}\n\n//////////////////////////////////////////////////\n//\n// Math Functions\n//\n//////////////////////////////////////////////////\n\n/**\n * Distance \n */\nexport function distance(pointA, pointB) {\n  return Math.hypot(pointA.x - pointB.x, pointA.y - pointB.y)\n}\n\n/*\n* To Deg \n*/\nexport function toDeg(angle) {\n  return angle * (180 / Math.PI);\n}\n\n/*\n* To Rad \n*/\nexport function toRad(angle) {\n  return angle * (Math.PI / 180);\n}\n\n/**\n* Clamp\n*/\nexport function clamp(size, limit) {\n  if(size > limit) {\n    return limit; \n  }\n  return size; \n}\n\n/**\n* Min\n*/\nexport function min(size, min) {\n  if(size < min) {\n    return min; \n  }\n  return size; \n}\n\n/**\n * Square\n * @param {number} val \n */\nexport function squared(val) {\n  return Math.pow(val, 2)\n}\n\n//////////////////////////////////////////////////\n//\n// Canvas Functions\n//\n//////////////////////////////////////////////////\n\n\n/**\n * \n * Active Bounds object for canvas\n */\nexport function ActiveBounds() {\n  this.minX = 100000;\n  this.maxX = -100000; \n  this.minY = 100000;\n  this.maxY = -100000;\n  \n  this.reset = _ => {\n    this.minX = 100000;\n    this.maxX = -100000; \n    this.minY = 100000;\n    this.maxY = -100000;\n  }\n\n  this.update = pos => {\n    if(pos.x > this.maxX) {\n      this.maxX = pos.x;\n    } \n    if (pos.x < this.minX) {\n      this.minX = pos.x; \n    }\n    if(pos.y > this.maxY) {\n      this.maxY = pos.y;\n    } \n    if (pos.y < this.minY) {\n      this.minY = pos.y; \n    }\n  }\n\n  this.draw = (ctx, padding = 0) => {\n    ctx.strokeRect(\n      this.minX - padding, \n      this.minY - padding, \n      (this.maxX - this.minX) + (padding * 2), \n      (this.maxY - this.minY) + ( padding * 2)\n    );\n  }\n\n  this.clear = (ctx, padding = 0) => {\n    ctx.clearRect(\n      this.minX - padding, \n      this.minY - padding, \n      (this.maxX - this.minX) + (padding * 2), \n      (this.maxY - this.minY) + ( padding * 2)\n    );\n  }\n}\n\n/* \n* Converts mouse pos from world to canvas space \n*/\nexport function posToCanvas(pos, canvasRect) {\n  return {\n    x: pos.x - canvasRect.left,\n    y: pos.y - canvasRect.top,\n  }\n}\n\n/* \n* Simple Circle draw method. \n*/\nexport function fillCircle(ctx, x, y, r, color) {\n  ctx.beginPath();\n  ctx.arc(x, y, r, 0, 2 * Math.PI);\n  if(color) {ctx.fillColor = color}\n  ctx.fill(); \n}\n\n/* \n* Simple Circle draw method. \n*/\nexport function strokeCircle(ctx, x, y, r, color) {\n  ctx.beginPath();\n  ctx.arc(x, y, r, 0, 2 * Math.PI);\n  if(color) {ctx.strokeColor = color}\n  ctx.stroke();\n}\n\n/* \n* Draw Triangle\n*/\nexport function strokeTriangle(ctx, pos, velocity) {\n  ctx.beginPath();\n  // let adj = velocity.x * 6; \n  // let angle = 15; \n  // let opposite = Math.tan(angle) * adj; \n  // let aX = pos.x + -velocity.x * 6; \n  // let aY = pos.y + -velocity.y * 6; \n  // let bX = pos.x + velocity.x * 6;\n  // let bY = pos.y + velocity.y * 6;\n  // // let cX = pos.x + velocity.x * 3; \n  // // let cY = pos.y + velocity.y * 3; \n  ctx.moveTo(pos.x - velocity.x * 2, pos.y - velocity.y * 2);\n  ctx.lineTo(pos.x + velocity.x * 2, pos.y + velocity.y * 2);\n\n  // ctx.moveTo(aX, aY);\n  // ctx.lineTo(bX, bY);\n  // // ctx.lineTo(cX, cY);\n  ctx.stroke();\n}\n\n\n/*\n* Lerp Line\n*/\nexport function drawLerpLine(ctx, start, end, numPoints = 1, magnitude = 5) {\n  if(!ctx || typeof ctx.moveTo == 'undefined') {throw new Error(\"Context is undefined\")}\n  ctx.moveTo(start.x, start.y);\n  let xUnit = (end.x - start.x) / numPoints\n  let yUnit = (end.y - start.y) / numPoints\n  for(let i = 1; i <= numPoints; i++) {\n    let x = start.x + (xUnit * i) + ((Math.random() - 0.5) * magnitude); \n    let y = start.y + (yUnit * i) + ((Math.random() - 0.5) * magnitude);\n    ctx.lineTo(x, y); \n  }\n}\n\n/*\n* Curve Line\n*/\n// export function drawCurveLine(ctx, start, end, numPoints = 1, magnitude = 5) {\n//   if(!ctx || typeof ctx.moveTo == 'undefined') {throw new Error(\"Context is undefined\")}\n//   let points = [start]; \n//   let xUnit = (end.x - start.x) / numPoints\n//   let yUnit = (end.y - start.y) / numPoints\n\n//   for(let i = 0; i < numPoints; i++) {\n//     let x = start.x + (xUnit * i) + ((Math.random() - 0.5) * magnitude); \n//     let y = start.y + (yUnit * i) + ((Math.random() - 0.5) * magnitude);\n//     points.push(new Point(x, y)); \n//   }\n\n//   ctx.moveTo(start.x, start.y);\n  \n//   if(points.length >= 2) {\n//     for(let i = 1; i <= points.length - 2; i++) {\n//       var xc = (points[i].x + points[i + 1].x) / 2;\n//       var yc = (points[i].y + points[i + 1].y) / 2;\n//       ctx.quadraticCurveTo(points[i].x, points[i].y, xc, yc);\n//       ctx.strokeStyle = 'red'; \n//       ctx.strokeRect(points[i].x, points[i].y, 1, 1);\n//       ctx.strokeStyle = 'white'; \n//       ctx.quadraticCurveTo(points[i].x, points[i].y, points[i+1].x,points[i+1].y);\n//     }\n//   } else {\n//     ctx.lineTo(start.x, start.y)\n//   }\n// }\n\n/*\n* Simplex Line\n*/\nexport function drawSimplexLine(ctx, start, end, numPoints = 1, simplex, time, magnitude = 1) {\n  if(!ctx || typeof ctx.moveTo == 'undefined') {throw new Error(\"Context is undefined\")}\n  ctx.moveTo(start.x, start.y);\n  let xUnit = (end.x - start.x) / numPoints\n  let yUnit = (end.y - start.y) / numPoints\n  for(let i = 1; i <= numPoints; i++) {\n    let x = start.x + (xUnit * i) + simplex.noise2D(i, time) * magnitude; \n    let y = start.y + (yUnit * i) + simplex.noise2D(i, time) * magnitude;\n    ctx.lineTo(x, y); \n  }\n}\n","import { createStore } from 'redux';\nimport data from '../data/data.js'; \nimport { next, prev } from '../components/helperFunctions'\n\nconst systems = data.systems.map((system, i) => {system.index = i; return system}); \nconst paths = systems.map(system => system.path); \n\nfunction stateFromIndex(index) {\n  if(index < 0 || index > systems.length) {throw new RangeError(\"State index is out of range.\")};\n  return {\n    prevSystem: prev(systems, index),\n    curSystem: systems[index],\n    nextSystem: next(systems, index),\n    wheelIndex: index, \n  }\n}\n\nfunction prevSystemState(state) {\n  let curi = state.curSystem.index; \n  let previ = (curi > 0) ? curi - 1 : systems.length - 1; \n  return {...state, ...stateFromIndex(previ)};  \n}\n\nfunction nextSystemState(state) {\n  let curi = state.curSystem.index; \n  let nexti = (curi < systems.length - 1) ? curi + 1 : 0; \n  return {...state, ...stateFromIndex(nexti)};   \n}\n\nfunction stateFromPath(state, path = \"\") {\n  for(let i = 0; i < paths.length; i++) {\n    if(paths[i] === path) {\n      return {...state, ...stateFromIndex(i)};\n    }\n  }\n  // throw new Error(`System path \"${path}\" does not exist`);\n  return state; \n}\n\n// Reducer \nfunction systemsReducer(state = [], action) {\n  // console.log(action);\n  switch (action.type) {\n    case 'NEXT_SYSTEM':\n      return nextSystemState(state)\n    \n    case 'PREV_SYSTEM':\n      return prevSystemState(state)\n\n    case 'SYSTEM_FROM_PATH': \n      return stateFromPath(state, action.path)\n\n    case 'SCROLL_CHANGE':  \n      return {\n        ...state,\n        pageHasScrolled: action.pageHasScrolled, \n      }\n\n    case 'WHEEL_UP':\n      return {\n        ...prevSystemState(state), \n        wheelIndex: state.wheelIndex - 1, \n        prevWheelIndex: state.wheelIndex,\n        lastChange: Date.now(),\n      };\n\n    case 'WHEEL_DOWN':\n      return {\n        ...nextSystemState(state), \n        wheelIndex: state.wheelIndex + 1, \n        prevWheelIndex: state.wheelIndex,\n        lastChange: Date.now(), \n      };\n\n    case 'SET_PREV_LOCATION':\n      return {\n        ...state,\n        prevLocation: action.prevLocation\n      };\n    \n    default:\n      return state\n  }\n}\n\nconst initialState = {\n  prevLocation: '/about',\n  prevWheelIndex: -1,\n  wheelIndex: 0,\n  lastChange: Date.now(),\n}\n\n// Create a Redux store holding the state of the app. \nexport default createStore(systemsReducer, stateFromPath(initialState, 'traffic')); ","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"line\", {\n  className: \"horizontal\",\n  x1: 21.95,\n  y1: 6.8,\n  x2: 0.76,\n  y2: 6.8\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"polyline\", {\n  className: \"triangle\",\n  points: \"8.19 0.38 0.76 6.8 8.19 13.23\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"small-arrow\",\n    viewBox: \"0 0 21.95 13.6\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/arrow-small.fb871edc.svg\";\nexport { SvgComponent as ReactComponent };","import React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { ReactComponent as ArrowSmall } from '../assets/arrow-small.svg'; \nimport throttle from 'lodash/throttle';\nimport classnames from 'classnames';\n\n//////////////////////////////////////////////////\n//\n// Nav Resolver\n//\n//////////////////////////////////////////////////\n\nexport class NavResolver extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      hasScrolled: false\n    }\n    this.throttledHandleScroll = throttle(this.handleScroll, 100); \n  }\n\n  componentDidMount() {\n    window.addEventListener('scroll', this.throttledHandleScroll);\n  }\n\n  componentWillUnmount() {\n    this.props.setHasScrolled(false);\n    window.removeEventListener('scroll', this.throttledHandleScroll);\n  }\n\n  handleScroll = (e) => {\n    if(window.scrollY <= 1) {\n      this.setState((prevState, props) => {\n        if(prevState.hasScrolled) {\n          return {hasScrolled: false}\n      }})\n    } else {\n      this.setState((prevState, props) => {\n        if(!prevState.hasScrolled) {\n          return {hasScrolled: true}\n      }})\n    }\n  }\n\n  defineRoutes = () => {\n    let { location, prevLocation} = this.props; \n    let pageIsAbout,\n      pageIsMobile;\n\n    if(location) {\n      pageIsAbout = (location.pathname === '/about'); \n      pageIsMobile = (location.pathname === '/mobile'); \n      this.pageIsSimulation = (location.pathname.split('/')[1] === 'simulation'); \n      this.pageIsTransition = (location.pathname.split('/')[1] === 'transition'); \n      this.pageIsSelector = (location.pathname === '/selector'); \n    }\n    this.titleLinkDestination = '/selector'; \n    this.aboutLinkDestination = '/about';\n    \n    if(pageIsAbout && prevLocation && prevLocation !== '/about') {\n      this.aboutLinkDestination = prevLocation; \n    }\n    else if(pageIsAbout) {\n      this.aboutLinkDestination = '/selector';\n    }\n    if(this.pageIsSelector) {\n      this.titleLinkDestination = '/selector';\n    }\n    else if(pageIsMobile) {\n      this.titleLinkDestination = '/mobile'; \n    }\n  }\n\n  render() {\n    this.defineRoutes(); \n\n    return (\n      <nav className={\n        classnames('navbar', \n          `${this.props.location.pathname.split('/')[1] || 'intro'}-page`,\n          { scrolled: this.state.hasScrolled || this.props.pageHasScrolled,\n            inactive: this.pageIsTransition},\n        )}\n      >\n        {/* Top Left Link */}\n        <NavLink className='title-link unbuttoned' \n          to={this.titleLinkDestination} \n          onClick={_ => window.scrollTo(0, 0)}\n          replace={this.pageIsSelector}\n        >\n          <div className={classnames('link-inner', {active: this.pageIsSimulation})}>\n            <div><ArrowSmall /></div>\n            <div>{process.env.REACT_APP_PROJECT_TITLE}</div>\n          </div>\n        </NavLink>\n        {/* Top Right Link */}\n        <NavLink \n          className='about-link unbuttoned' \n          to={this.aboutLinkDestination}\n        >\n          <div className='link-inner'>\n            <div>Go Back</div><div>About</div>\n          </div>\n        </NavLink>\n      </nav>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    pageHasScrolled: state.pageHasScrolled, \n    prevLocation: state.prevLocation,  \n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    setHasScrolled: hasScrolled => {\n      dispatch({type: 'SCROLL_CHANGE', pageHasScrolled: hasScrolled}); \n    },\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NavResolver)\n","import React, { Component } from 'react';\nimport { Switch, Redirect, withRouter } from 'react-router-dom';\nimport throttle from 'lodash/throttle';\n\n//////////////////////////////////////////////////\n//\n// Mobile Redirect\n//\n//////////////////////////////////////////////////\n\nclass MobileRedirect extends Component {\n  constructor() {\n    super();\n    this.state = {\n      width: window.innerWidth,\n    };\n\n    this.throttleResize = throttle(this.handleWindowSizeChange, 333);\n  }\n  \n  componentWillMount() {\n    window.addEventListener('resize', this.throttleResize);\n  }\n  \n  componentWillUnmount() {\n    window.removeEventListener('resize', this.throttleResize);\n  }\n  \n  handleWindowSizeChange = () => {\n    this.setState({ width: window.innerWidth, resize: true });\n  };\n  \n  render() {\n    const { location: curLocation } = this.props;\n    const { width } = this.state;\n\n    let locationIsMobile = curLocation.pathname === '/mobile'; \n    let locationIsAbout = curLocation.pathname === '/about';\n    let locationShouldBeMobile = width < 480;\n\n    if(locationIsAbout) {\n      return null\n    }\n\n    // If not already mobile, but should be, redirect to mobile. \n    if(!locationIsMobile && locationShouldBeMobile) {\n      return (\n        <Switch>\n          <Redirect from='/' to='/mobile' />\n          <Redirect from='/transition' to='/mobile' />\n          <Redirect from='/selector' to='/mobile' />\n          <Redirect from='/simulation' to='/mobile' />\n        </Switch> \n      )\n    }\n\n    // If location is mobile, but page is larger, redirect to desktop.\n    if(locationIsMobile && !locationShouldBeMobile) {\n      return (\n        <Redirect from='/mobile' to='/selector' />\n      )\n    }\n\n    // If should be and is mobile, return null. \n    if(locationIsMobile && locationShouldBeMobile) {\n      return null; \n    }\n\n    // If not mobile, and shouldnt be, stay not mobile. \n    if(!locationIsMobile && !locationShouldBeMobile) {\n      return null \n    } \n  } \n}\n\n\nexport default withRouter(MobileRedirect)","import { toRad, ranRGB, CanvasTransition, mergeObjects, drawLerpLine} from './helperFunctions'\n\n//////////////////////////////////////////////////\n//\n// Canvas shape that controls drawing. \n//\n//////////////////////////////////////////////////\n\n/**\n* Polygon\n* \n*/\nclass Polygon {\n  constructor(opts = {}) {\n    let {\n      sides = 3,\n      center = {x: 0, y: 0},\n      diameter = 50,\n      rotation = 0,\n      stroke = false,\n      strokeStyle,\n      strokeWidth = 1,\n      fill = true,\n      fillStyle,\n      hasNoise = false,\n      colors = [],\n      amp = 20, \n      freq = 1 / 40,\n      smoothness = 50, \n    } = opts;\n\n    // Opts \n    this.hasNoise = hasNoise;\n    this.sides = sides;\n    this.diameter = diameter;\n    this.center = center;\n    this.stroke = stroke;\n    this.lineWidth = strokeWidth;\n    this.fill = fill;\n    this.strokeStyle = strokeStyle;\n    this.colors = colors;\n    this.rotation = rotation;\n    this.amp = amp;\n    this.freq = freq; \n    this.smoothness = smoothness; \n\n    if(this.fill) {\n      while(this.colors.length < this.sides) {this.colors.push(ranRGB());}\n    }\n\n    // Defaults\n    this.cursor = {x: 0, y: 0};\n    this.transitions = []; \n    this.magnitude = 0;   \n    this.hitIndex = -1; \n    this.hitBufferColors = this.generateHitBufferColors(); \n    this.triangles = this.getTrianglesPoints(); \n\n    // Methods for defining redraws, to save performance. \n    this.hasChanged = true; \n  }\n\n  get shouldDraw() {\n    return this.hasChanged\n  }\n\n  generateHitBufferColors() {\n    return [...Array(this.sides)].map(_ => ranRGB()); \n  }\n\n  rotateBy(deg) {\n    this.rotation += deg;\n    this.triangles = this.getTrianglesPoints(); \n    this.hasChanged = true;\n  }\n\n  rotateTo(deg) {\n    this.rotation = deg;\n    this.triangles = this.getTrianglesPoints(); \n    this.hasChanged = true;\n  }\n\n  rotateToEase(deg, duration, onComplete) {\n    const rotateTransition = new CanvasTransition({\n      startValue: this.rotation, \n      endValue: deg, \n      durationMs: duration, \n      fps: 60, \n      onStep: res => {this.rotation = res}, \n      onComplete: onComplete,\n    })\n    this.transitions.push(rotateTransition);\n  }\n\n  easeDiameter(startDiameter, endDiameter, duration, onComplete) {\n    const growTransition = new CanvasTransition({\n      startValue: startDiameter, \n      endValue: endDiameter, \n      durationMs: duration, \n      fps: 60, \n      onStep: res => {this.diameter = res}, \n      onComplete: onComplete,\n    })\n    this.transitions.push(growTransition);\n  }\n\n  easeAngle(startAngle, endAngle, duration, onComplete) {\n    const growTransition = new CanvasTransition({\n      startValue: startAngle, \n      endValue: endAngle, \n      durationMs: duration, \n      fps: 60, \n      onStep: res => {this.rotation = res}, \n      onComplete: onComplete,\n    })\n    this.transitions.push(growTransition);\n  }\n\n  easeAngleTo(endAngle, duration, onComplete) {\n    const growTransition = new CanvasTransition({\n      startValue: this.rotation, \n      endValue: endAngle, \n      durationMs: duration, \n      fps: 60, \n      onStep: res => {this.rotation = res}, \n      onComplete: onComplete,\n    })\n    this.transitions.push(growTransition);\n  }\n\n  easeSides(startSides, endSides, duration, onComplete) {\n    const growTransition = new CanvasTransition({\n      startValue: startSides, \n      endValue: endSides, \n      durationMs: duration, \n      fps: 60, \n      onStep: res => {this.sides = res}, \n      onComplete: onComplete,\n    })\n    this.transitions.push(growTransition);\n  }\n\n  easeOpacity(startAlpha, endAlpha, duration, onComplete) {\n    const fadeTransition = new CanvasTransition({\n      startValue: startAlpha, \n      endValue: endAlpha, \n      durationMs: duration, \n      fps: 60, \n      onStep: res => {this.globalAlpha = res}, \n      onComplete: onComplete,\n    })\n    this.transitions.push(fadeTransition);\n  }\n\n  easeStrokeBrightness(startBrightness, endBrightness, duration, onComplete) {\n    const fadeTransition = new CanvasTransition({\n      startValue: startBrightness, \n      endValue: endBrightness, \n      durationMs: duration, \n      fps: 60, \n      onStep: res => {this.strokeStyle = `rgb(${res}, ${res}, ${res})`}, \n      onComplete: onComplete,\n    })\n    this.transitions.push(fadeTransition);\n  }\n \n  updateTransitions = () => {\n    if(this.transitions.length > 0) {\n      this.transitions = this.transitions.filter(transition => {\n        transition.step(); \n        \n        // Remove the transition is still active, \n        // return it to the transitions array. \n        if(!transition.isDone) {\n          return transition; \n        }\n        return false;\n      })\n      this.hasChanged = true; \n    }\n    this.triangles = this.getTrianglesPoints(); \n  }\n\n  getTrianglesPoints() {\n    let curPoint, curAngle, curX, curY, nextX, nextY, nextPoint, nextAngle, triangle; \n    let triangles = []; \n\n    // Draw each triangle \n    for (let i = 0; i < this.sides; i += 1) {\n      curAngle = (i + 1) * 2 * Math.PI / this.sides - toRad(this.rotation); \n      nextAngle = (i + 2) * 2 * Math.PI / this.sides - toRad(this.rotation); \n      \n      curX = this.center.x + this.diameter * Math.cos(curAngle);\n      curY = this.center.y + this.diameter * Math.sin(curAngle);\n      nextX = this.center.x + this.diameter * Math.cos(nextAngle);\n      nextY = this.center.y + this.diameter * Math.sin(nextAngle);\n      \n      curPoint = {x: curX, y: curY};\n      nextPoint = {x: nextX, y: nextY};\n      \n      triangle = [this.center, curPoint, nextPoint]; \n      triangles.push(triangle); \n    }\n    \n    return triangles;\n  }\n  \n  resize(scale) {\n    this.center = {x: this.center.x * scale.x, y: this.center.y * scale.y};\n    this.diameter *= scale.x; \n    this.triangles = this.getTrianglesPoints();\n\n    return (ctx, mousePos, time) => {\n      this.triangles.map((points, i) => {\n        ctx.beginPath(); \n        ctx.moveTo(points[0].x, points[0].y);\n        ctx.fillStyle = this.colors[i]; \n        ctx.lineTo(points[1].x, points[1].y);\n        ctx.lineTo(points[2].x, points[2].y);\n        ctx.fill();\n      })\n    }\n  }\n\n  // drawHidden(ctx, colors) {\n  //   if(colors) {\n  //     this.triangles.map((points, i) => {\n  //       ctx.beginPath(); \n  \n  //       // Draw triangle as three points\n  //       ctx.lineTo(points[0].x, points[0].y);\n  //       ctx.lineTo(points[1].x, points[1].y);\n  //       ctx.lineTo(points[2].x, points[2].y); \n  \n  //       // Fill points. \n  //       ctx.fillStyle = colors[i]; \n  //       ctx.strokeStyle = colors[i];    \n  //       ctx.lineWidth = 10;     \n  //       ctx.fill();\n  //       ctx.stroke();\n  //       ctx.closePath(); \n  //     })\n  //   }\n  // }\n \n  update() {\n    this.updateTransitions(); \n  }\n\n  draw(ctx, mousePos, tick) {\n   \n    if(this.strokeStyle) {\n      ctx.strokeStyle = this.strokeStyle;\n    }\n    if(this.lineWidth) {\n      ctx.lineWidth = this.lineWidth;\n    }\n    if(this.globalAlpha) {\n      ctx.globalAlpha = this.globalAlpha;\n    }\n\n    if(this.hasNoise) {\n      if(mousePos) {\n        const distanceFromMouse = Math.hypot(mousePos.x - this.center.x, mousePos.y - this.center.y)\n        this.magnitude = Math.round(distanceFromMouse / 1 * 2 / 50);\n      }\n    }\n\n    this.triangles.map((points, i) => {\n      this.hasChanged = false; \n\n      ctx.beginPath(); \n\n      if(this.magnitude) {\n        // console.log(this.magnitude)\n      }\n\n      // let t = 100; \n      // for(let i = 0; i < t; i++) {\n      //   ctx.lineTo(this.center.x + i - (t / 2), this.center.y - 10 + slope(i, tick / 10, this.amp, this.freq));\n      // }\n\n      // ctx.stroke();\n      // ctx.beginPath();\n\n      // for(let i = 0; i < t; i++) {\n      //   ctx.lineTo(this.center.x + i - (t / 2), this.center.y + 10 + slope(i, tick / 10, this.amp, this.freq));\n      // }\n      \n      \n      // function sinLine(ctx, start, end, numPoints, amp, freq, xOff) {\n      //   if(!ctx || typeof ctx.moveTo == 'undefined') {throw new Error(\"Context is undefined\")}\n      //   // const lineEq = x => amp * Math.sin(x * freq + xOff);\n\n      //   ctx.moveTo(start.x, start.y);\n      //   let xUnit = (end.x - start.x) / numPoints\n      //   let yUnit = (end.y - start.y) / numPoints\n\n      //   for(let i = 1; i <= numPoints; i++) {\n      //     let x = start.x + (xUnit * i) + (Math.sin(i) * amp / 50); \n      //     let y = start.y + (yUnit * i) + (Math.sin(i) * amp / 50);\n      //     ctx.lineTo(x, y); \n      //   }\n      // }\n\n      // function slope(x, xOffset, amp, freq) {\n      //   return amp * Math.sin(x * freq + xOffset) \n      // }\n      \n\n      // export function drawLerpLine(ctx, start, end, numPoints = 1, magnitude = 5) {\n      //   if(!ctx || typeof ctx.moveTo == 'undefined') {throw new Error(\"Context is undefined\")}\n      //   ctx.moveTo(start.x, start.y);\n      //   let xUnit = (end.x - start.x) / numPoints\n      //   let yUnit = (end.y - start.y) / numPoints\n      //   for(let i = 1; i <= numPoints; i++) {\n      //     let x = start.x + (xUnit * i) + ((Math.random() - 0.5) * magnitude); \n      //     let y = start.y + (yUnit * i) + ((Math.random() - 0.5) * magnitude);\n      //     ctx.lineTo(x, y); \n      //   }\n      // }\n\n      \n      // this.hasChanged = true; \n\n      if(this.hasNoise) {\n        // sinLine(ctx, points[0], points[1], 20, this.magnitude * this.amp, this.freq); \n        // sinLine(ctx, points[1], points[2], 20, this.magnitude * this.amp, this.freq); \n        drawLerpLine(ctx, points[0], points[1], 5, this.magnitude * this.amp); \n        drawLerpLine(ctx, points[1], points[2], 5, this.magnitude * this.amp); \n        ctx.lineTo(points[0].x, points[0].y);\n        this.hasChanged = true; \n      }\n      else {\n        ctx.moveTo(points[0].x, points[0].y);\n        ctx.fillStyle = this.colors[i]; \n        ctx.lineTo(points[1].x, points[1].y);\n        ctx.lineTo(points[2].x, points[2].y);\n      }\n      \n      if(i === this.hitIndex) {\n        ctx.lineTo(points[1].x, points[1].y);\n        ctx.lineTo(points[2].x, points[2].y);\n      }\n\n      if(this.stroke) {\n        ctx.stroke(); \n      }\n      if(this.fill) {\n        ctx.fill(); \n      }\n    })\n    // ctx.closePath();  // Whether or not to draw the final path line. \n  }\n}\n\n/**\n* Pentagon\n* @extends Polygon\n*/\nexport default class PolygonController extends Polygon {\n  /**\n  * Create a Pentagon\n  * @param {Object} options - center, diameter and colors of the Pentagon\n  * @param {Point} options.center - The center point of the Pentagon\n  * @param {number} options.diameter - The diameter of the Pentagon\n  * @param {Array.<string>} options.colors - The five colors that make up the Pentagon\n  * @param {number} options.rotation - The initial rotation \n  * @param {number} options.sides - The number of polygon sides \n  */\n  constructor(options) {\n    super(mergeObjects(options))\n  }\n}\n","import React, { PureComponent } from 'react';\nimport $ from 'jquery'; \n\nexport default class Canvas extends PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.canvasRef = React.createRef();\n    this.canvas = undefined;\n    this.ctx = undefined; \n\n    this.hoistCanvas = props.hoistCanvas || function(){}; \n  }\n\n  componentDidMount() {\n    this.canvas = this.canvasRef.current; \n    this.$canvas = $(this.canvas); \n\n    // Make the canvas respond to the Device Pixel Ratio. \n    this.sizeCanvasRender(); \n\n    // Passes the context and canvas to the parent when the ref is defined. \n    this.hoistCanvas(this.canvas, this.ctx); \n  }\n\n  sizeCanvasRender = () => {\n    this.dpr = window.devicePixelRatio || 1;\n    // Give the canvas pixel dimensions of their CSS size * the device pixel ratio.\n    this.canvas.width = this.$canvas.width() * this.dpr;\n    this.canvas.height = this.$canvas.height() * this.dpr;\n    this.ctx = this.canvas.getContext('2d');\n    // Scale all drawing operations by the dpr, so you don't have to worry about the difference.\n    this.ctx.scale(this.dpr, this.dpr);\n  }\n\n  render() {\n    return (\n      <canvas\n        ref={this.canvasRef} \n        className='canvas-base' \n      />\n    );\n  }\n}\n","\n//////////////////////////////////////////////////\n//\n// Request Animation Frame (rAF) Controller\n//\n// A centralized place to execute functions relying on rAF timing. \n//\n//////////////////////////////////////////////////\n\nwindow.cout = (oneInNumber, ...messages) => {\n  if(Math.round(Math.random() * oneInNumber) === oneInNumber) {\n    console.log(...messages);\n  }\n}\n\n\nexport default class RafController {\n  constructor(options) {\n    let {fps} = options; \n    this.fps = fps;\n    this.startLoop();  \n    this.onStep = function() {}; \n  }\n\n  startLoop() {\n    this.fpsInterval = 1000 / this.fps;\n    this.then = Date.now();\n    this.startTime = this.then;\n    this.ticker = 0; \n    this.increment = 1;  \n    this.loop();\n  }\n\n  stopLoop() {\n    cancelAnimationFrame(this.rafId);  \n  }\n\n  changeFps(fps) {\n    this.fps = fps;\n    this.stopLoop();\n    this.startLoop();\n  }\n\n  loop = () => {\n    // window.cout(10, this);\n    this.rafId = requestAnimationFrame(this.loop);\n    \n    // Check the amount of time elapsed since previous animation frame. \n    // If it fits within the fps interval, call step function.  \n    this.now = Date.now();\n    this.elapsed = this.now - this.then;\n    this.ticker += this.increment; \n\n    if(this.elapsed > this.fpsInterval) {\n      this.then = this.now - (this.elapsed % this.fpsInterval);\n      this.onStep(this.ticker); \n    }\n  }\n}\n","import React, { Component } from 'react';\nimport $ from 'jquery'\nimport PentagonController from './pentagonController'\nimport CanvasBase from './canvasBase'\nimport RafController from '../components/rafController'\nimport data from '../data/data'\nimport { mergeObjects, posToCanvas } from './helperFunctions';\n\nexport default class PentagonWheel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      width: undefined,\n      height: undefined,\n      mounted: false, \n    }\n    \n    this.mousePos = props.mousePos; \n    this.pentagonRef = React.createRef();\n    this.rafController = new RafController({fps: 60}); \n  }\n\n  componentDidMount() {\n    if(this.pentagonRef) {\n      this.pentagon = this.pentagonRef.current; \n      this.width = $(this.pentagon).width();\n      this.height = $(this.pentagon).height();\n      this.center = {x: this.width / 2, y: this.height / 2};\n      this.wheelIndex = 0;\n\n      const pentagonOpts = {\n        center: this.center,\n        diameter: this.width / 2 - 5, // 0,\n        rotation: 18,\n        sides: 5,\n        colors: [],\n        stroke: true,\n        fill: false,\n        strokeStyle: '#333', \n        strokeWidth: 1,\n        fillStyle: 'none', \n        hasNoise: false, \n        amp: 10, \n        freq: 1 / 40,\n      };\n\n      this.pentagonController = new PentagonController(pentagonOpts)\n\n      // Executing the step function for the given framerate. \n      this.rafController.onStep = ticker => {\n        if(this.ctx) {\n          this.pentagonController.update(); \n          // this.pentagonController.rotateBy(0.2)\n          if(this.pentagonController.shouldDraw) {\n            this.ctx.clearRect(0, 0, this.width, this.height);\n            this.pentagonController.draw(this.ctx, posToCanvas(this.mousePos, this.canvasRect), ticker);\n          }\n        }\n      }\n\n      let duration = 999;\n      this.pentagonController.easeOpacity(0, 1, duration * 3); \n      this.pentagonController.easeDiameter(0, this.width / 2 - 5, duration * 3); \n      this.pentagonController.easeSides(2, 5, duration * 3); \n      // this.pentagonController.easeAngleTo(36, duration * 10);\n      // \n      // setTimeout(() => {\n        // this.pentagonController.easeSides(20, 3, duration); \n        // this.pentagonController.easeAngle(-180, 18, duration);\n      // }, (duration))\n\n      this.setState({\n        width: this.width,\n        height: this.height,\n        mounted: true, \n      })\n    }\n  }\n\n  componentWillUnmount() {\n    this.rafController.stopLoop(); \n  }\n\n  componentDidUpdate() {\n    let duration = 999;\n\n    switch(this.props.stateIndex) {\n      case 0: \n        break; \n\n      case 1:\n        this.pentagonController.easeAngleTo(36, duration * 5);\n        break; \n      \n      case 2:\n        break;\n      \n      case 3:\n        // this.pentagonController.easeStrokeBrightness(255, 180, 999); \n        break;\n\n      case 6:\n        break;\n\n      case 8:\n        this.rafController.stopLoop(); \n        break;\n    }\n  }\n\n  render() {\n    const hoistCanvas = (_canvas, _ctx) => {\n      this.canvas = _canvas; \n      this.ctx = _ctx; \n      this.canvasRect = this.canvas.getBoundingClientRect(); \n    }\n    return (\n      <div className='pentagon-container' ref={this.pentagonRef}>\n        <div className='pentagon-inner'>\n          {(this.state.width && this.state.height) &&\n            <CanvasBase hoistCanvas={hoistCanvas}/>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Transition from 'react-transition-group/Transition'\n\n// https://swizec.com/blog/fade-in-lazy-loaded-images-react-css-quick-guide/swizec/8163\n// Great FadeIn Component\nexport class FadeWrapper extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = { loaded: false, };\n\n\t\tthis.defaultStyle = {\n\t\t\ttransition: `opacity ${this.props.duration}ms ease-in-out`,\n\t\t\topacity: 0,\n\t\t\theight: 0,\n\t\t}\n\n\t\tthis.transitionStyles = {\n\t\t\tentering: { opacity: 0, height: 0, pointerEvents: \"none\" },\n\t\t\tentered: { opacity: 1, height: \"auto\", pointerEvents: \"all\" },\n\t\t};\n\n\t\tthis.onLoad = this.onLoad.bind(this);\n\t}\n\n\tonLoad() { this.setState({ loaded: true }); };\n\n\trender() {\n\t\tconst { children, duration, key } = this.props,\n\t\t\t{ loaded } = this.state;\n\n\t\treturn (\n\t\t\t<Transition key={key} in={loaded} timeout={duration}>\n\t\t\t\t{state => children(this.onLoad, { ...this.defaultStyle, ...this.transitionStyles[state] })}\n\t\t\t</Transition>\n\t\t);\n\t}\n}\n\nexport class SimpleFade extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.defaultStyle = {\n\t\t\ttransition: `opacity ${this.props.duration}ms ease-in-out ${this.props.delay || 0}ms`,\n\t\t\topacity: 0,\n\t\t}\n\n\t\tthis.transitionStyles = {\n\t\t\tentering: { opacity: 0, pointerEvents: \"none\" },\n\t\t\tentered: { opacity: 1, pointerEvents: \"all\" },\n\t\t\texiting: { opacity: 1, pointerEvents: \"all\" },\n\t\t\texited: { opacity: 0, pointerEvents: \"none\" },\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { children, duration = 333, shouldRender, shouldUpdate} = this.props;\n\t\treturn (\n\t\t\t<Transition key={shouldUpdate} in={shouldRender} timeout={duration} className='fade-wrapper'>\n\t\t\t\t{state =>\n\t\t\t\t\t<span className={this.props.className} style={{ ...this.defaultStyle, ...this.transitionStyles[state] }}>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</span>\n\t\t\t\t}\n\t\t\t</Transition>\n\t\t);\n\t}\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"polygon\", {\n  className: \"p1\",\n  points: \"52.18 227.74 199.82 227.19 125.81 126.47 52.18 227.74\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"polygon\", {\n  className: \"p2\",\n  points: \"5.59 87.7 52.18 227.74 125.81 126.47 5.59 87.7\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"polygon\", {\n  className: \"p3\",\n  points: \"199.82 227.19 245.73 86.81 125.81 126.47 199.82 227.19\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"polygon\", {\n  className: \"p4\",\n  points: \"125.34 0 125.81 126.47 245.73 86.81 125.34 0\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"polygon\", {\n  className: \"p5\",\n  points: \"125.34 0 5.59 87.7 125.81 126.47 125.34 0\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"pentagon-icon\",\n    viewBox: \"0 0 251.61 251.61\"\n  }, props), _ref, _ref2, _ref3, _ref4, _ref5);\n};\n\nexport default __webpack_public_path__ + \"static/media/pentagon.a0d9a8ca.svg\";\nexport { SvgComponent as ReactComponent };","import React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom'\nimport LoaderPentagon from '../components/loaderPentagon'\nimport background from '../assets/background-texture-white.jpg'; \nimport { SimpleFade } from '../components/fadeWrapper';\n// import loaderTexture from '../assets/backgroundTest.jpg'; \nimport { ReactComponent as Pentagon } from '../assets/pentagon.svg'; \nimport classnames from 'classnames'; \nimport data from '../data/data';\n\n//////////////////////////////////////////////////\n//\n// About Page\n//\n//////////////////////////////////////////////////\n\nclass IntroPage extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      mounted: false,\n      stateIndex: 0,\n    }\n    this.fadeDuration = 666;\n    this.mousePos = {x: 0, y: 0}; \n  }\n  \n  onMouseMove = (e) => { \n    this.mousePos.x = e.clientX;\n    this.mousePos.y = e.clientY; \n  }\n\n  componentDidMount() {\n    this.stateInterval = setInterval(\n      _ => this.setState(prevState => {return {stateIndex: prevState.stateIndex + 1}}),\n      999);\n    this.setState({mounted: true})\n  }\n\n  handleClick = () => {\n    if(this.state.stateInterval >= 5) {\n      this.props.history.push('/selector');\n    }\n  }\n  \n  componentWillUnmount() {\n    clearInterval(this.stateInterval);\n  }\n\n  render() {\n    let stateIndex = this.state.stateIndex\n    let states = [];\n    for(let i = 0; i < stateIndex; i++) {\n      states.push(`state${i}`);  \n    }\n    if(stateIndex > 8) {\n      clearInterval(this.stateInterval);\n    }\n\n    return (\n      <div \n        className={classnames('page-wrapper', 'intro-page', states)} \n        onMouseMove={this.onMouseMove}\n        // onClick={this.handleClick}\n      >\n        <div className='content'>\n          <SimpleFade \n            className='text-container' \n            shouldRender={stateIndex >= 6} \n            duration={this.fadeDuration}\n          >\n            <h2 className='project-title'>{process.env.REACT_APP_PROJECT_TITLE}</h2>\n            {/* <h4>Exploring <em>emergent systems</em> in our world  through 5 interactive simulations.</h4> */}\n            {/* <h4>Exploring <em>emergent systems</em>  where simple components interact to form complex patterns  through 5 interactive simulations.</h4> */}\n            <h4>Exploring relationships between part and whole  and the emergent systems \n            that form in our world  through 5 interactive questions.</h4>\n          </SimpleFade>\n          <span className='pentagon-wrapper'>\n          {/* <SimpleFade className='pentagon-wrapper' shouldRender={this.state.mounted}> */}\n          <LoaderPentagon mousePos={this.mousePos}  stateIndex={stateIndex}/>\n          {/* </SimpleFade> */}\n          </span>\n          <SimpleFade className='start-button-container' shouldRender={stateIndex >= 6} duration={this.fadeDuration + 666}>\n            <button className='start-button unbuttoned' onClick={_ => this.props.history.push('/selector')}>\n              Choose a question\n            </button>\n          </SimpleFade>\n          {/* <Pentagon /> */}\n        </div>\n        <span className='bg-color'/>\n        <img className='bg-texture' src={background} alt='background_texture'/>\n        <span className='bg-solid'/>\n      </div>       \n    );\n  }\n}\n\nexport default withRouter(IntroPage)\n","import React, { Component } from 'react';\nimport background from '../assets/background-texture-white.jpg'; \nimport throttle from 'lodash/throttle';\nimport { connect } from 'react-redux';\n\n\n//////////////////////////////////////////////////\n//\n// About Page\n//\n//////////////////////////////////////////////////\n\nconst qaText = [\n  {\n    header: 'What is an Emergent System?',\n    copy: `\n      An emergent system is one in which a number of simple parts interact, \n      creating a resulting pattern that is more complex than the individual elements.\n      When a snowflake forms from ice crystals, no one crystal has a plan for the entire structure.\n      But the simple molecular interactions between crystals results in a unique, complex form. \n    `,\n  },\n  {\n    header: 'Why emergence?',\n    copy: `\n      Emergence exists throughout our world, yet often goes unrecognized. Human society typically \n      tries to solve problems with a top-down approach, but emergence looks at ways problems can be \n      understood and solved through bottom-up organization.\n    `,\n  },\n  {\n    header: 'What is bottom-up organization?',\n    copy: `\n      Bottom-up organization is another way of describing Emergent Systems. It refers to the fact that there\n      is no leader in an Emergent System telling the other parts how to behave. This is opposed to the top-down\n      organization that human society takes as standard. With bottom up organization, the whole system responds \n      intelligently even when the individuals act according to simple rules. For example, in ant colonies, there\n      is no leader ant. The Queen ant is completely separate from the rest of the colony, and the actions of each\n      individual ant is only defined by their biological response to their neighbors .\n    `,\n  },\n  {\n    header: 'What are other examples of Emergence?',\n    copy: `\n      Examples include the layout of cities, the workings of the stock market, bee hives and ant nests, \n      the structure of galaxies, flocks of birds, plant leaves and the shapes of flowers.  \n    `,\n  },\n]\n\nclass AboutPage extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      mounted: false,\n    }\n    // this.throttledHandleScroll = throttle(this.handleScroll, 100); \n  }\n\n  handleScroll = (e) => {\n    if(e.target.scrollTop <= 1) {\n      this.props.setHasScrolled(false);\n    } else {\n      this.props.setHasScrolled(true);\n    }\n  }\n\n  render() {\n    return (\n      <div className={'page-wrapper about-page'} onScroll={this.handleScroll}>\n        <div className='content'>\n          <div className='page-header'>\n            <h2 className='site-title'>About</h2>\n            {/* <h4 className='site-subtitle'>\n              exploring emergent systems through 5 interactive simulations\n              </h4> */}\n          </div>\n          <section className='page-body'>\n            <div className='description-text'>\n              <h2 className='project-description'>\n                Part to Whole, the name of this project, refers to a phenomenon called Emergence. \n                <div className='break'></div>\n                Emergence is when a complex pattern (whole) arrises from simple interactions between components (part).\n                The 5 systems in this project are all examples of emergent systems, which exist in \n                everything from nature, science, art and philosophy.\n                <div className='break'></div>\n                The hope of this project is that, by understanding some of the beauty, elegance and problem-solving \n                power of emergent systems, we might learn to see problems of our world in a whole new way. \n              </h2>\n            </div>\n            <div className='project-text'>\n              <h4 className='section-header'>The Project</h4>\n              <div className='copy-block project'>\n                <h2 className='header'>\n                  Designed and developed by \n                  <a href='http://lucasbuilds.site' target='_blank'> Lucas Drummond {'\\u2192'}</a>\n                </h2>\n                \n                <p className='copy'>\n                  Created for a Senior Capstone Project, for the Communication Design Program at \n                  Washington University in St. Louis (2019).\n                </p>\n                <br></br>\n                <p className='copy'>\n                  Special thanks to Jonathan Hanahan, Craig Reynolds and Ian McGregor.\n                </p>\n              </div>\n            </div>\n            <div className='question-text'>\n              <h4 className='section-header'>Some Questions</h4>\n              <div className='questions'>\n                {qaText.map((text, i) => \n                  <CopyBlock {...text} index={i} key={`copy-${i}`}/>\n                  // <CopyBlock {...text} index={i} style={{transitionDelay: `${i * 200 + 1800}ms`}} key={`copy-${i}`}/>\n                )}\n              </div>\n            </div>\n          </section>\n          <span className='bg-color'/>\n          <img className='bg-texture' src={background} alt='background_texture'/>\n          <span className='bg-solid'/>\n        </div>\n      </div>       \n    );\n  }\n}\n\nfunction CopyBlock(props) {\n  let {header, copy, style, index} = props; \n  return (\n    <div className='copy-block' style={style}>\n      <h4 className='index'>Q{index}</h4>\n      {header && <h2 className='header'>* {header}</h2>}\n      <p className='copy'>{copy}</p>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    nextSystem: state.nextSystem,\n    curSystem: state.curSystem,\n    prevSystem: state.prevSystem,\n    wheelIndex: state.wheelIndex,\n    prevWheelIndex: state.prevWheelIndex,  \n    lastChange: state.lastChange, \n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    setHasScrolled: hasScrolled => {\n      dispatch({type: 'SCROLL_CHANGE', pageHasScrolled: hasScrolled}); \n    },\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AboutPage);\n\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"polygon\", {\n  className: \"st0\",\n  points: \"40.5,19.7 20.5,0.7 0.5,19.7 0.5,33.5 14.5,20.3 14.5,64.7 15.5,64.7 25.5,64.7 26.5,64.7 26.5,20.3 40.5,33.5 \"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"arrowIcon\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 41 65.2\"\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/arrow.de7af7ff.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  className: \"cls-1\",\n  d: \"M155.39,1.5\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M0,.5C10.13.5,15.22,5.74,20.14,10.8s9.42,9.7,18.71,9.7,13.86-4.71,18.71-9.7S67.56.5,77.7.5,92.92,5.74,97.84,10.8s9.41,9.7,18.7,9.7,13.86-4.71,18.71-9.7S145.25.5,155.39.5s15.22,5.24,20.14,10.3,9.42,9.7,18.71,9.7,13.86-4.71,18.7-9.7S223,.5,233.09.5s15.22,5.24,20.14,10.3,9.42,9.7,18.71,9.7,13.86-4.71,18.71-9.7S300.66.5,310.79.5,326,5.74,330.94,10.8s9.42,9.7,18.71,9.7\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"squiggle\",\n    viewBox: \"0 0 349.65 21\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/squiggle.2550fbdf.svg\";\nexport { SvgComponent as ReactComponent };","import React, {Component} from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nclass PentagonSvg extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      offset: 0\n    }\n\n    this.offset = 0;\n    this.duration = 666; \n    \n    this.onHoverUp = _ => this.setState({offset: -1});\n    this.onHoverDown = _ => this.setState({offset: 1});\n    this.onHoverOff = _ => this.setState({offset: 0});\n  }\n\n  render() {\n    let props = this.props; \n    this.triAttributes = function(i) {\n      let style = {fill: props.colors[i], cursor: 'pointer'};\n      let onClick = _ => {}; \n      let onEnter = _ => {}; \n      let plusI = (props.curIndex + 1 < 5) ? props.curIndex + 1 : 0;\n      let minusI = (props.curIndex - 1 >= 0) ? props.curIndex - 1 : 4;\n      if(i === minusI) {onClick = props.onPrevClick; onEnter = this.onHoverDown}\n      if(i === props.curIndex) {onClick = props.onCenterClick;}\n      if(i === plusI) {onClick = props.onNextClick; onEnter = this.onHoverUp}\n      return {\n        style: style,\n        onClick: onClick,\n        onMouseEnter: onEnter,\n        onMouseLeave: this.onHoverOff,\n      }\n    }\n\n    this.pentStyles = {\n      transform: `rotate(${-(360 / 5 * props.wheelIndex) + 54 + this.state.offset}deg)`,\n      fill: 'transparent',\n      cursor: 'pointer',\n      transition: `transform ${this.duration}ms ease-in-out`,\n    }\n    return (\n      <CSSTransition\n        in={props.in}\n        timeout={this.duration}\n        className='pentagon-icon'\n        classNames=\"pentagon-icon\"\n        style={this.pentStyles}\n      >\n      <span>\n       <svg viewBox=\"0 0 251.61 251.61\" style={{transition: this.pentStyles.transition}}>\n          <polygon {...this.triAttributes(0)} points=\"125.34 0 125.81 126.47 245.73 86.81 125.34 0\"/>\n          <polygon {...this.triAttributes(1)} points=\"199.82 227.19 245.73 86.81 125.81 126.47 199.82 227.19\"/>\n          <polygon {...this.triAttributes(2)} points=\"52.18 227.74 199.82 227.19 125.81 126.47 52.18 227.74\"/>\n          <polygon {...this.triAttributes(3)} points=\"5.59 87.7 52.18 227.74 125.81 126.47 5.59 87.7\"/>\n          <polygon {...this.triAttributes(4)} points=\"125.34 0 5.59 87.7 125.81 126.47 125.34 0\"/>\n        </svg> \n      </span>\n      </CSSTransition>\n    )\n  }\n}\n\nexport default PentagonSvg","import React from 'react';\n\nexport default function SvgOutline(props) {\n  const SvgComponent = props.component; \n  const {color='red', onClick=_=>{}, style={}} = props; \n  \n  return (\n    <span className='svg-outline-container' onClick={onClick} style={style}>\n      <SvgComponent className='svg-outline' style={{stroke: color}} />\n      <span className='fill-container'>\n        <SvgComponent className='svg-fill' style={{fill: color}} />\n      </span>\n    </span>\n  );\n}\n","import React, {Component} from 'react';\nimport classnames from 'classnames'; \n\nexport default class ButtonWrapper extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      hovering: false,\n      hoverOff: false, \n    }\n  }\n  \n  render() {\n    return (\n      <button \n        className={\n          classnames(\n            'button-wrapper', \n            'unbuttoned', \n            this.props.className, \n            {\n              hovering: this.props.hovering || this.state.hovering,\n              hoverOff: this.props.hoverOff || this.state.hoverOff,\n            }\n          )\n        }\n        onClick={this.props.onClick}  \n      >\n        <div className='active-area' \n          onMouseEnter={_ => this.setState({hovering: true})} \n          onMouseLeave={_ => this.setState({hovering: false})}\n        ></div>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\nimport data from '../data/data';\n// Asset and components\nimport { ReactComponent as Arrow } from '../assets/arrow.svg'; \nimport { ReactComponent as Squiggle } from '../assets/squiggle.svg'; \nimport PentagonSvg from '../components/pentagonSvg';\nimport SvgOutline  from '../components/svgOutline';\nimport ButtonWrapper from '../components/buttonWrapper';\nimport { SimpleFade } from '../components/fadeWrapper';\nimport throttle from 'lodash/throttle';\n\n//////////////////////////////////////////////////\n//\n// Selector Page\n//\n//////////////////////////////////////////////////\n\nclass SelectorPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      mounted: false, \n    }\n    this.fadeDuration = 333;\n    this.throttledPrevClick = throttle(props.onPrevClick, 500);\n    this.throttledNextClick = throttle(props.onNextClick, 500);\n  }\n\n  componentDidMount() {\n    this.setState({mounted: true});\n  }\n\n  render() {\n    let {curSystem, wheelIndex} = this.props\n    let destinationPath = `/transition/${curSystem.path}`;\n\n    return (\n      <div className='page-wrapper selector-page'>\n        <section className='content'>\n          <PentagonSvg \n            wheelIndex={wheelIndex} \n            curIndex={curSystem.index}\n            colors={data.systems.map(system => system.color)} \n            onPrevClick={this.throttledPrevClick}\n            onCenterClick={_ => this.props.history.push(destinationPath)}\n            onNextClick={this.throttledNextClick}  \n            in={this.state.mounted}\n          />\n          <SimpleFade className='arrows-container' duration={this.fadeDuration} shouldRender={this.state.mounted}>\n              <ButtonWrapper onClick={this.throttledPrevClick} >\n                <SvgOutline component={Arrow}  color='black'/>\n              </ButtonWrapper>\n              <ButtonWrapper onClick={this.throttledNextClick}>\n                <SvgOutline component={Arrow}  color='black' style={{transform: 'rotate(180deg)'}}/>\n              </ButtonWrapper>\n          </SimpleFade>\n          <SimpleFade className='squiggle-container' duration={this.fadeDuration} shouldRender={this.state.mounted}>\n            <ButtonWrapper onClick={_ => this.props.history.push(destinationPath)}>\n              <Squiggle />\n            </ButtonWrapper>\n          </SimpleFade>\n          <SimpleFade className='option-container' duration={this.fadeDuration} shouldRender={this.state.mounted}>\n            <TransitionGroup component={null}>\n              <CSSTransition \n                key={curSystem.path} \n                timeout={{enter: 450, exit: 300}} \n                classNames='rotate'\n              >\n                <Link to={destinationPath} className='option-inner'>\n                  <h1 className='title'>{curSystem.question}</h1>\n                  <span className='subtitle'>\n                    <h4>system</h4>\n                    <h3 className='index'>{curSystem.index + 1}/5</h3>\n                  </span>\n                </Link>\n              </CSSTransition> \n            </TransitionGroup>\n          </SimpleFade>\n        </section>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    nextSystem: state.nextSystem,\n    curSystem: state.curSystem,\n    prevSystem: state.prevSystem,\n    wheelIndex: state.wheelIndex,\n    prevWheelIndex: state.prevWheelIndex,  \n    lastChange: state.lastChange, \n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    onPrevClick: id => {\n      dispatch({type: 'WHEEL_UP'}); \n    },\n    onNextClick: id => {\n      dispatch({type: 'WHEEL_DOWN'}); \n    },\n  }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SelectorPage))","import React, { Component } from 'react';\nimport { Redirect, withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\n//////////////////////////////////////////////////\n//\n// Transition Page\n//\n//////////////////////////////////////////////////\n\nclass TransitionPage extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      mounted: false\n    }\n  }\n\n  componentDidMount() {\n    this.timeout = setTimeout(() => {\n      this.setState({mounted: true})\n    }, (1300));\n  }\n  \n  componentWillUnmount() {\n    clearTimeout(this.timeout);\n  }\n\n  render() {\n    let {curSystem = {}, prevLocation, history} = this.props; \n    let {path = 'traffic'} = curSystem; \n\n    return (\n      <div className={`page-wrapper transition-page ${path}`}>\n        {this.state.mounted && history.action !== 'REPLACE' &&\n          <Redirect to={`/simulation/${path}`}/>\n        }\n      </div>    \n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    curSystem: state.curSystem,\n    prevLocation: state.prevLocation, \n  }\n}\n\n\nTransitionPage = withRouter(connect(mapStateToProps)(TransitionPage))\n\nexport default TransitionPage","import React from 'react';\n\nexport default function ColoredPentagonSvg(props) {\n  let colors = props.colors; \n  return (\n    <svg viewBox=\"0 0 251.61 251.61\" className={props.className}>\n      <polygon style={{fill: colors[0]}} points=\"125.34 0 125.81 126.47 245.73 86.81 125.34 0\"/>\n      <polygon style={{fill: colors[1]}} points=\"199.82 227.19 245.73 86.81 125.81 126.47 199.82 227.19\"/>\n      <polygon style={{fill: colors[2]}} points=\"52.18 227.74 199.82 227.19 125.81 126.47 52.18 227.74\"/>\n      <polygon style={{fill: colors[3]}} points=\"5.59 87.7 52.18 227.74 125.81 126.47 5.59 87.7\"/>\n      <polygon style={{fill: colors[4]}} points=\"125.34 0 5.59 87.7 125.81 126.47 125.34 0\"/>\n    </svg> \n  )\n}","import Boid from 'boid';\n\n//////////////////////////////////////////////////\n//\n// Boid Pool Controller\n// https://github.com/ianmcgregor/boid\n//\n//////////////////////////////////////////////////\n\nexport default class BoidPoolController {\n  constructor(opts = {}) {\n    const {\n      simulationType = 'traffic', \n      count = 40,\n      bounds, \n      maxSpeed = 1,\n      maxForce = 1,\n      maxDistance = 1,\n      minDistance = 1,\n      avoidDistance = 80,\n      arriveThreshold = 20,\n      mass = 1,\n      initFn,\n      updateFn,\n      clickFn, \n      edgeBehavior = 'bounce', \n    } = opts; \n    \n    // Custom settings\n    this.state = simulationType;\n    this.bounds = bounds; \n    this.initFn = initFn;\n    this.updateFn = updateFn; \n    this.clickFn = clickFn; \n    this.avoidDistance = avoidDistance; \n    \n    // Default Settings\n    this.target = Boid.vec2(0, 0);\n    this.chaser = Boid.vec2(0, 0);\n    this.center = Boid.vec2(bounds.width / 2, bounds.height / 2);\n    this.boidPool = []; \n    this.otherBoidPool = []; \n    \n    // Initialize boids to custom settings\n    let boid; \n    for(let i = 0; i < count; i++) {\n      boid = new Boid();\n      boid.edgeBehavior = edgeBehavior;\n      boid.position.x = bounds.width * Math.random();\n      boid.position.y = bounds.height * Math.random(); \n      boid.velocity.x = Math.random() - 0.5;\n      boid.velocity.y = Math.random() - 0.5;\n      boid.maxSpeed = maxSpeed;\n      boid.maxForce = maxForce; \n      boid.avoidDistance = avoidDistance;\n      boid.arriveThreshold = arriveThreshold; \n      boid.maxDistance = maxDistance;\n      boid.minDistance = minDistance; \n      boid.mass = mass; \n      boid.setBounds(bounds.width, bounds.height, bounds.x, bounds.y);\n      this.boidPool.push(boid);\n    }\n\n    // If the simulation has a specific init style, use that. \n    if(this.initFn) {\n      this.initFn(this.boidPool, this.bounds, this.otherBoidPool); \n    }\n  }\n\n  onClick(mousePos) {\n    if(this.clickFn) {\n      this.clickFn(mousePos, this.boidPool, this.otherBoidPool, this.bounds); \n    }\n  }\n\n  getUpdateFn() {\n    if(this.updateFn) {\n      return boid => {\n        this.updateFn({\n          boid: boid,\n          boidPool: this.boidPool,\n          otherBoidPool: this.otherBoidPool,\n          bounds: this.bounds,\n          center: this.center,\n          chaser: this.chaser, \n        })\n      }\n    } \n    else {\n      return boid => boid.wander().update();\n    }\n  }\n\n  updateOtherBoids(ctx) {\n    this.otherBoidPool = this.otherBoidPool.filter(boid => {\n      if(boid.step) {\n        boid.step(ctx); \n      } else {\n        boid.userData.step(ctx); \n      }\n        \n      if(!boid.isDone) {\n        return boid; \n      }\n      return false;\n    })\n  }\n\n  updateBoidCount(count) {\n    if(this.boidPool.length > count) {\n      this.boidPool.splice(0, this.boidPool.length - count);\n    } \n    else if (this.boidPool.length < count) {\n      let newBoidPool = [],\n        sampleBoid = this.boidPool[0], \n        newBoid;\n\n      for(let i = 0; i < count - this.boidPool.length; i++) {\n        newBoid = new Boid(); \n        newBoid.edgeBehavior = sampleBoid.edgeBehavior;\n        newBoid.position.x = this.bounds.width * Math.random();\n        newBoid.position.y = this.bounds.height * Math.random(); \n        newBoid.velocity.x = Math.random() - 0.5;\n        newBoid.velocity.y = Math.random() - 0.5;\n        newBoid.maxSpeed = sampleBoid.maxSpeed;\n        newBoid.maxForce = sampleBoid.maxForce; \n        newBoid.mass = sampleBoid.mass; \n        newBoid.avoidDistance = sampleBoid.avoidDistance;\n        newBoid.arriveThreshold = sampleBoid.arriveThreshold; \n        newBoid.maxDistance = sampleBoid.maxDistance;\n        newBoid.minDistance = sampleBoid.minDistance; \n        newBoid.setBounds(this.bounds.width, this.bounds.height, this.bounds.x, this.bounds.y);\n        newBoidPool.push(newBoid);\n      }\n      if(this.initFn) {\n        this.initFn(newBoidPool, this.bounds, this.otherBoidPool); \n      }\n      this.boidPool = [...this.boidPool, ...newBoidPool];\n    }\n  }\n\n  updateTarget(x, y) {\n    this.target = Boid.vec2(x, y);\n  }\n\n  updateChaser(x, y) {\n    this.chaser = Boid.vec2(x, y);\n  }\n\n  getPos(x, y) {\n    return Boid.vec2(x, y);\n  }\n\n  // Updates for individual boids. \n  setBounds(width, height) {\n    this.bounds.width = width;\n    this.bounds.height = height; \n    this.boidPool.map(boid => boid.setBounds(width, height))\n  }\n}","import Boid from 'boid'; // import $ from 'jquery'; \nimport { CanvasTransition, ActiveBounds } from '../components/helperFunctions';\n\n//////////////////////////////////////////////////\n//\n// Cursor Controller\n//\n//////////////////////////////////////////////////\n\nexport default class CursorBoidController {\n  constructor(opts = {}) {\n    const {\n      simulationType,\n      color, \n      strokeWidth, \n      bounds, \n      clearFrames, \n      clickFn,\n      updateFn, \n      drawFn,\n    } = opts; \n\n    this.mousePos = {\n      // x: bounds.width / 2,\n      // y: bounds.height / 2,\n      x: 0,\n      y: -10,\n    }\n\n    this.initBoid(opts);\n\n    // Default Settings\n    this.initialColor = color; \n    this.color = color; \n    this.strokeWidth = strokeWidth;\n    this.bounds = bounds;\n    this.clearFrames = clearFrames; \n    \n    // Custom Settings\n    this.simulationType = simulationType;\n    this.clickFn = clickFn;\n    this.updateFn = updateFn;\n    this.drawFn = drawFn;\n\n    this.clickBuffer = [];\n    this.drawBuffer = []; \n    this.activeBounds = new ActiveBounds();\n    this.playing = true;\n  }\n\n  initBoid({maxSpeed = 2, bounds, edgeBehavior, initFn}) {\n    // Boid Settings\n    this.boid = new Boid();\n    this.boid.position.x = this.mousePos.x; \n    this.boid.position.y = this.mousePos.y;\n    this.boid.maxSpeed = maxSpeed;\n    this.boid.velocity.x = 1;\n    this.boid.velocity.y = 1;\n    this.boid.edgeBehavior = edgeBehavior || 'EDGE_NONE';\n\n    // Apply custom boid settings\n    if(initFn) {\n      initFn(this.boid, bounds); \n    }\n  }\n\n  pause() {\n    this.playing = false; \n    this.color = 'rgba(0, 0, 0, 0.3)';\n    this.slowdown = new CanvasTransition({startValue: 100, endValue: 0, durationMs: 666, onStep: value => {\n      this.boid.position.x += this.boid.velocity.x * (value / 100); \n      this.boid.position.y += this.boid.velocity.y * (value / 100); \n    }});\n  }\n\n  play() {\n    this.color = this.initialColor;\n    this.playing = true; \n  }\n\n  onClick(mousePos, options) {\n    this.clickBuffer.push(mousePos);\n    if(this.clickBuffer.length > 5) {\n      this.clickBuffer.shift();\n    }\n    if(this.clickFn) {\n      this.clickFn({\n        mousePos: mousePos,\n        clickBuffer: this.clickBuffer, \n        drawBuffer: this.drawBuffer,\n        bounds: this.bounds,\n        boid: this.boid, \n        ...options\n      })\n    }\n  }\n\n  clear(ctx) {\n    if(this.simulationType === 'colony') {\n      this.activeBounds.maxY = this.bounds.height; \n    }\n    this.activeBounds.clear(ctx, 35); \n  }\n\n  update(ctx) {\n    // Update cursor\n    if(this.updateFn) {\n      this.updateFn({mousePos: this.mousePos, boid: this.boid, bounds: this.bounds});\n      this.activeBounds.update(this.boid.position); \n    }\n    // Update drawbuffer\n    // console.log(this.drawBuffer)\n    if(this.drawBuffer.length > 0) {\n      this.drawBuffer = this.drawBuffer.filter(drawable => {\n        this.activeBounds.update(drawable.position); \n        drawable.step(ctx); \n        if(!drawable.isDone) {\n          return drawable; \n        }\n        return false;\n      })\n    }\n  }\n\n  draw(ctx) {\n    ctx.beginPath();\n    ctx.strokeStyle = this.color;\n    ctx.lineWidth = this.strokeWidth; \n\n    if(this.drawFn) {\n      this.drawFn(ctx, this.boid, this.bounds); \n    }\n  }\n\n  updateBounds = (bounds) => {\n    this.bounds.width = bounds.width;\n    this.bounds.height = bounds.height;\n  }\n}","import BoidPoolController from './boidPoolController'; \nimport CursorBoidController from './cursorBoidController'; \nimport { ActiveBounds } from '../components/helperFunctions';\n\n//////////////////////////////////////////////////\n//\n// Simulation Controller\n//\n//////////////////////////////////////////////////\n\nexport default class SimulationController {\n  constructor(options = {}) {\n    let {\n      x = 0,\n      y = 0,\n      width,\n      height,\n      boidSettings,\n      cursorBoidSettings, \n      simulationType, \n      caveContainer,\n    } = options; \n\n    this.simulationType = simulationType;\n    this.caveContainer = caveContainer; // Ref for the colony simulation\n\n    // Creates the simulation bounds, with active bounds for drawing. \n    this.bounds = {x: x, y: y, width: width, height: height}\n    this.activeBounds = new ActiveBounds(); \n    // Creates the pool controller.\n    this.createBoidPoolController(boidSettings);\n    // Creates the cursor controller. \n    this.createCursorBoid(cursorBoidSettings);\n  }\n\n  createBoidPoolController(boidSettings) {\n    if(boidSettings.isVisible) {\n      // Create the controller\n      this.boidPoolController = new BoidPoolController({\n        simulationType: this.simulationType,\n        bounds: this.bounds,\n        ...boidSettings,\n      })\n      this.boidSettings = boidSettings; \n      this.clearBoidFrames = boidSettings.clearFrames; \n      this.boidDrawFn = boidSettings.drawFn; \n      this.clickbufferDrawFn = boidSettings.clickbufferDrawFn; \n      this.drawActiveBounds = boidSettings.drawActiveBounds;\n    }\n  }\n\n  createCursorBoid(cursorBoidSettings) {\n    if(cursorBoidSettings.isVisible) {\n      // Create the controller\n      this.cursorController = new CursorBoidController({\n        simulationType: this.simulationType,\n        bounds: this.bounds, \n        ...cursorBoidSettings, \n      }); \n      this.clearCursorFrames = cursorBoidSettings.clearFrames; \n      this.cursorVisible = cursorBoidSettings.cursorVisible;\n      this.drawCursorBounds = cursorBoidSettings.drawActiveBounds;\n    }\n  }\n\n  updateAndDrawCursor(ctx, mousePos) {\n    this.cursorController.update(ctx);\n    let pos = this.cursorController.boid.position; \n    this.boidPoolController.updateChaser(pos.x, pos.y);\n    this.cursorController.mousePos = mousePos; \n    this.cursorController.draw(ctx);\n  }\n\n  updateAndDrawBoids(ctx) {\n    let settings = this.boidSettings; \n    this.updateFn = this.boidPoolController.getUpdateFn(); \n    // Style Canvas\n    ctx.lineWidth = settings.strokeWidth; \n    ctx.strokeStyle = settings.strokeColor;\n    ctx.fillStyle = settings.fillColor;\n    ctx.beginPath(); \n    // Update and Draw\n    if(this.updateFn) {\n      this.boidPoolController.boidPool.map(boid => {\n        this.updateFn(boid)\n        this.activeBounds.update(boid.position, 20); \n        this.boidDrawFn(ctx, boid); \n      });\n    }\n    if(settings.stroke) {ctx.stroke()}\n    if(settings.fill) {ctx.fill()}\n  }\n\n  step(ctx, mousePos) {\n    // Clear cursor\n    if(this.cursorController && this.clearCursorFrames) {\n      this.cursorController.clear(ctx, 35);\n    }\n    // Clear boid position and reset boid bounds\n    if(this.boidPoolController && this.clearBoidFrames) {\n      this.activeBounds.clear(ctx, 35);\n    }\n    // Draw cursor if active\n    if(this.cursorController) {\n      this.cursorController.activeBounds.reset(); \n      this.updateAndDrawCursor(ctx, mousePos);\n    }\n    // Draw boids if active\n    if(this.boidPoolController) {\n      this.activeBounds.reset(); \n      this.boidPoolController.updateOtherBoids(ctx);\n      this.updateAndDrawBoids(ctx);\n    } \n    // If viewing bounds, draw them\n    if(this.drawCursorBounds) {\n      this.cursorController.activeBounds.draw(ctx, 20);\n    }\n    // If viewing bounds, draw them\n    if(this.drawActiveBounds) {\n      this.activeBounds.draw(ctx)\n    }\n  }\n\n  onClick(mousePos) {\n    if(this.cursorController) {\n      this.cursorController.onClick(mousePos, {caveContainer: this.caveContainer});\n    }\n    if(this.boidPoolController) {\n      this.boidPoolController.onClick(mousePos);\n    }\n  }\n\n  handleCrowdClick(val) {\n    if(this.boidPoolController) {\n      this.boidPoolController.updateBoidCount(val);\n    }\n  }\n\n  resize(newBounds) {\n    this.center = {x: newBounds.width / 2, y: newBounds.height / 2};\n    this.bounds.width = newBounds.width; \n    this.bounds.height = newBounds.height; \n    if(this.cursorBoidController) {\n      this.cursorBoidController.updateBounds(newBounds);\n    }\n    if(this.boidPoolController) {\n      this.boidPoolController.setBounds(\n        this.bounds.width, \n        this.bounds.height,\n        this.bounds.x,\n        this.bounds.y,\n      ) \n    }\n  }\n}\n\n","//////////////////////////////////////////////////\n//\n// Default Simulation Settings\n//\n//////////////////////////////////////////////////\n\nexport default {\n  rafSettings: {\n    fps: 60,\n  },\n  simulationSettings: {\n    simulationType: 'traffic',\n    cursorBoidSettings: {\n      isVisible: true,\n      cursorVisible: true,\n      clearFrames: true, \n      color: 'black',\n      width: 4,\n      onClick: _ => {\n\n      },\n      ripple: false, \n    },\n    boidSettings: {\n      isVisible: true,\n      clearFrames: true, \n      drawActiveBounds: false, \n      count: 50, \n      minSpeed: 2, \n      maxSpeed: 5,\n      shape: 'line',\n      color: 'white',\n      strokeWidth: 2,\n      drawFn: (ctx, boid) => {\n        ctx.strokeRect(boid.position.x, boid.position.y, 5, 5);\n      },\n    }\n  }\n}\n","import Boid from 'boid';\nimport { CanvasTransition, clamp } from '../../components/helperFunctions';\n\n//////////////////////////////////////////////////\n//\n// Traffic Settings\n//\n//////////////////////////////////////////////////\n\nconst settingsFps = 40; \n\nexport default {\n  rafSettings: {fps: settingsFps},\n  simulationSettings: {\n    simulationType: 'traffic',\n    cursorBoidSettings: {\n      isVisible: true,\n      cursorVisible: true,\n      clearFrames: true, \n      strokeWidth: 4,\n      maxSpeed: 30,\n      clickFn: cursorClickFn,\n      initFn: cursorBoidInitFn,\n      updateFn: cursorBoidUpdateFn, \n      drawFn: cursorBoidDrawFn,\n    },\n    boidSettings: {\n      isVisible: true,\n      clearFrames: true, \n      drawActiveBounds: false, \n      count: 72, \n      minDistance: 80,\n      maxSpeed: 2,\n      maxDistance: 200,\n      arriveThreshold: 60,\n      strokeWidth: 0.8, \n      strokeColor: 'white',\n      edgeBehavior: 'wrap',\n      clickFn: boidClickFn,\n      initFn: boidInitFn,\n      updateFn: boidUpdateFn, \n      drawFn: boidDrawFn, \n    }\n  }\n}\n\n/**\n * \n * Simulation Specific Data\n */\nlet lanes = 6;\nlet laneWidth = 60; \nlet lanesTotal = lanes * laneWidth; \nfunction getClosestLane(pos, lanes, laneWidth, totalWidth) {\n  let center = totalWidth / 2; \n  let closestLaneX = center - (lanesTotal / 2) + (lanes) * laneWidth; \n  let laneX; \n  for (let i = 1; i <= lanes; i++) {\n    laneX = center - (lanesTotal / 2) + i * laneWidth;\n    if(Math.abs(laneX - pos.x) < Math.abs(closestLaneX - pos.x)) {\n      closestLaneX = laneX; \n    }\n  }\n  return closestLaneX;\n}\n\n/**\n * \n * Cursor Click Function\n */\nfunction cursorClickFn({boid, drawBuffer}) {\n  const ripple = new CanvasTransition({\n    startValue: 0, \n    endValue: 100, \n    durationMs: 666, \n    fps: settingsFps, \n    position: {...boid.position},\n    onStep: (per, ctx) => {\n      let pos = {...boid.position}\n      ctx.strokeStyle = `rgba(0, 0, 0, ${1 - per / 100})`;\n      ctx.lineWidth = 1.5\n      ctx.beginPath();\n      ctx.arc(pos.x, pos.y, 25 * (per / 100), 0, 2 * Math.PI);\n      ctx.stroke();\n    }\n  })\n  drawBuffer.push(ripple);\n}\n\n/**\n * \n * Cursor Boid Initializaion Function\n */\nfunction cursorBoidInitFn(boid) {\n  boid.velocity.x = 0;\n  boid.velocity.y = 0;\n  boid.maxForce = 10;\n}\n\n/**\n * \n * Cursor Boid Update Function\n */\nfunction cursorBoidUpdateFn({mousePos, boid, bounds}) {\n  let closestLaneX = getClosestLane(mousePos, lanes, laneWidth, bounds.width);\n  if(Math.abs(mousePos.x - closestLaneX) > (bounds.width / 5)) {\n    boid.position.x = -20;\n  }\n  else {\n    boid.position.x = closestLaneX + 2;\n    boid.velocity.x = 0;\n    boid.arrive(Boid.vec2(closestLaneX, mousePos.y)).update();\n  }\n}\n\n/**\n * \n * Cursor Boid Draw Function\n */\nfunction cursorBoidDrawFn(ctx, boid, bounds) {\n  // ctx.arc(boid.position.x, boid.position.y, 4, 0, 2 * Math.PI);\n  // ctx.fill();\n  ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';\n  ctx.arc(boid.position.x, boid.position.y, 6, 0, 2 * Math.PI);\n  ctx.fill();\n}\n\n/**\n * \n * All Boids Initializaion Function\n */\nfunction boidInitFn(boidPool, bounds) {\n  let center = bounds.width / 2;\n  let heightUnit = bounds.height / boidPool.length;\n  // let heightUnit = bounds.height / (Math.floor(boidPool.length / lanes));\n\n  boidPool.map((boid, i) => {\n    let x = (i % lanes + 1); \n    // let y = (Math.floor(i / lanes)); \n    boid.position.x = center - (lanesTotal / 2) + x * laneWidth;\n    // boid.position.y = (y) * heightUnit; \n    boid.position.y = i * heightUnit; // (y + 1) * (this.height / (lanes + 2)); \n    boid.velocity.x = 0; \n    boid.velocity.y = 2;\n    boid.mass = 1;\n    boid.maxForce = 0.1;\n  })\n}\n\n/**\n * \n * All Boids Update Function\n */\nfunction boidUpdateFn({boid, boidPool, otherBoidPool, chaser, bounds, center}) {\n  let allBoids = boidPool; \n  if(otherBoidPool.length > 0) {\n    allBoids = [...boidPool, ...otherBoidPool];\n  } \n  let pos = boid.position, \n    // otherPos,\n    xDiff;\n    // yDiff;\n\n  let laneBoids = allBoids.filter(otherBoid => {\n    if(otherBoid !== boid) {\n      xDiff = otherBoid.position.x - pos.x;\n      if(Math.abs(xDiff) < 10) {\n        return boid; \n      } \n    }\n  })\n\n  let aheadBoids = laneBoids.filter(otherBoid => {\n    if(otherBoid.position.y > pos.y) {\n      return boid; \n    }\n  })\n\n  let closestBoid,\n    closestDist = 100000;\n\n  if(aheadBoids.length === 0) {\n    laneBoids.map(otherBoid => {\n      if(otherBoid.position.y < closestDist) {\n        closestDist = otherBoid.position.y;\n        closestBoid = otherBoid; \n      }\n    })\n    closestBoid = {position: {x: closestBoid.position.x, y: closestBoid.position.y + bounds.height}}\n  } \n  else {\n    aheadBoids.map(otherBoid => {\n      if(Math.abs(otherBoid.position.y - pos.y) < closestDist) {\n        closestDist = otherBoid.position.y - pos.y;\n        closestBoid = otherBoid; \n      }\n    })\n  }\n\n  // Sight distance\n  if(closestBoid && (closestBoid.position.y - pos.y) < 120) {\n    // boid.velocity.y = clamp(boid.velocity.y - 0.05, 0.05);\n    // boid.velocity.y = clamp(boid.velocity.y /= 1.02, boid.maxSpeed);\n    boid.arrive(Boid.vec2(closestBoid.position.x, closestBoid.position.y));\n  } else {\n    boid.velocity.y = clamp(boid.velocity.y *= 1.05, boid.maxSpeed);\n  }\n  boid.velocity.x = 0;\n  // boid.velocity.y = clamp(boid.velocity.y *= 1.02, boid.maxSpeed);\n  boid.update(); \n}\n\n/**\n * \n * All Boids Click Function\n */\nfunction boidClickFn(mousePos, boidPool, otherBoidPool, bounds) {\n  let closestLaneX = getClosestLane(mousePos, lanes, laneWidth, bounds.width);\n  \n  const obstacle = new CanvasTransition({\n    startValue: 0, \n    endValue: 100, \n    durationMs: 4000, \n    fps: settingsFps, \n    position: {x: closestLaneX, y: mousePos.y},\n    onStep: (per, ctx) => {\n      let radius = 30; \n\n      ctx.fillStyle = `rgba(0, 0, 0, ${0.8 - per / 80})`;\n      ctx.lineWidth = 1.5\n      ctx.beginPath();\n      ctx.arc(closestLaneX + 2, mousePos.y + 2, radius * (per / 60), 0, 2 * Math.PI);\n      ctx.fill();\n      if(per >= 20) {\n        ctx.fillStyle = `rgba(0, 0, 0, ${0.8 - ((per - 20) / 80)})`;\n        ctx.beginPath();\n        ctx.arc(closestLaneX + 2, mousePos.y + 2, radius * ((per - 20) / 80), 0, 2 * Math.PI);\n        ctx.fill();\n      }\n      if(per >= 40) {\n        ctx.fillStyle = `rgba(0, 0, 0, ${0.8 - ((per - 40) / 80)})`;\n        ctx.beginPath();\n        ctx.arc(closestLaneX + 2, mousePos.y + 2, radius * ((per - 40) / 100), 0, 2 * Math.PI);\n        ctx.fill();\n      }\n    }\n  })\n  otherBoidPool.push(obstacle);\n}\n\n/**\n * \n * All Boids Draw Function\n */\nfunction boidDrawFn(ctx, boid) {\n  ctx.strokeRect(boid.position.x, boid.position.y, 5, 10);\n}\n\n\n","import Boid from 'boid';\nimport { CanvasTransition, squared, min, clamp } from '../../components/helperFunctions';\n\n//////////////////////////////////////////////////\n//\n// Colony Simulation Settings\n//\n//////////////////////////////////////////////////\n\nconst settingsFps = 60;\n\nexport default {\n  rafSettings: {fps: settingsFps},\n  simulationSettings: {\n    simulationType: 'colony',\n    cursorBoidSettings: {\n      isVisible: true,\n      clearFrames: true, \n      drawActiveBounds: false,\n      color: 'white',\n      initFn: cursorBoidInitFn,\n      updateFn: cursorUpdateFn,\n      drawFn: cursorDrawFn,\n      clickFn: cursorClickFn,\n    },\n    boidSettings: {\n      isVisible: true,\n      clearFrames: true, \n      drawActiveBounds: false, \n      count: 50, \n      maxSpeed: 5,\n      minDistance: 50, \n      maxDistance: 300, \n      // stroke: true,\n      strokeColor: 'black',\n      strokeWidth: 1,\n      initFn: boidInitFn,\n      updateFn: boidUpdateFn,\n      drawFn: boidDrawFn, \n      edgeBehavior: 'bounce',\n    }\n  }\n}\n\n/**\n * \n *  Cursor Boid Initialization Function\n * \n */\nfunction cursorBoidInitFn(boid) {\n  boid.position.y = 0;\n  boid.maxSpeed = 8;\n  boid.velocity.x = 0;\n  boid.velocity.y = 0;\n  boid.maxForce = 10;\n  boid.arriveThreshold = 20; \n}\n\n/**\n * \n *  Cursor Boid OnClick Function\n * \n */\nfunction cursorClickFn({mousePos, boid, bounds, drawBuffer, caveContainer}) {\n  const ripple1 = new CanvasTransition({\n    startValue: 0, \n    endValue: 100, \n    durationMs: 666, \n    fps: settingsFps, \n    position: {...boid.position},\n    onStep: (per, ctx) => {\n      let pos = {...boid.position}\n      ctx.strokeStyle = `rgba(0, 0, 0, ${1 - per / 100})`;\n      ctx.lineWidth = 1.5\n      ctx.beginPath();\n      ctx.arc(pos.x + 2, bounds.height - pos.y + 2, 25 * (per / 100), 0, 2 * Math.PI);\n      ctx.stroke();\n    }\n  })\n  const ripple2 = new CanvasTransition({\n    startValue: 0, \n    endValue: 100, \n    durationMs: 666, \n    fps: settingsFps, \n    position: {...boid.position},\n    onStep: (per, ctx) => {\n      let pos = {...boid.position}\n      ctx.strokeStyle = `rgba(0, 0, 80, ${1 - per / 100})`;\n      ctx.lineWidth = 1.5\n      ctx.beginPath();\n      ctx.arc(pos.x + 2, pos.y + 2, 25 * (per / 100), 0, 2 * Math.PI);\n      ctx.stroke();\n    }\n  })\n  drawBuffer.push(ripple1, ripple2);\n\n  // Finds the scale factor by which to adjust the graphic to match the mousepos. \n  let yTranslate = (mousePos.y - bounds.height / 2);\n  let minTranslate = min(Math.abs(yTranslate), 50);\n\n  let yPos = clamp(mousePos.y, bounds.height / 2 - 50);\n  let heightRange = bounds.height / 2 - 50; \n  let heightScale = yPos / heightRange;\n  let adjustedScale = ((1 - Math.round(heightScale * 100)) + 100);\n  if(caveContainer) {\n    let caveTop = caveContainer.children[0]; \n    let caveBottom = caveContainer.children[1]; \n    if(caveTop) {caveTop.style.transform = `translateY(${-minTranslate}px)`};\n    if(caveBottom) {caveBottom.style.transform = `translateY(${minTranslate}px)`};\n    bounds.obstacleScale = adjustedScale * 0.8; // Stores scale in bounds so boids can read on update. \n  }\n}\n\n/**\n * \n *  Cursor Boid Update Function\n * \n */\nfunction cursorUpdateFn({mousePos, bounds, boid}) {\n  let center = bounds.width / 2; \n  let yDiff = min(Math.abs(bounds.height / 2 - mousePos.y), 50); \n  let yPos = bounds.height / 2 - yDiff;\n  boid.position.x = center;\n  boid.velocity.x = 0;\n  boid.arrive(Boid.vec2(center, yPos)).update();\n}\n\n/**\n * \n *  Cursor Boid Draw Function\n * \n */\nfunction cursorDrawFn(ctx, boid, bounds) {\n  ctx.lineWidth = 1;\n  ctx.beginPath();\n  ctx.moveTo(boid.position.x - 20, boid.position.y);\n  ctx.lineTo(boid.position.x + 20, boid.position.y);\n  ctx.stroke();\n  ctx.beginPath();\n  ctx.moveTo(boid.position.x - 20, bounds.height - boid.position.y);\n  ctx.lineTo(boid.position.x + 20, bounds.height - boid.position.y);\n  ctx.stroke();\n}\n\n/**\n * \n *  All Boids Initialization Function\n * \n */\nfunction boidInitFn(boidPool, bounds, otherBoidPool) {\n  boidPool.map(boid => {\n    boid.position.x = (Math.random() - 0.5) * 120 + (bounds.width / 4);\n    boid.position.y = (bounds.height / 2) * Math.random() + bounds.height / 4;\n  })\n\n  let points = [\n    {position: {x: bounds.width / 5 * 0, y: bounds.height / 2}, step: _ => {}, isDone: false},\n    {position: {x: bounds.width / 2, y: bounds.height / 2}, step: _ => {}, isDone: false},\n    {position: {x: bounds.width / 5 * 5, y: bounds.height / 2}, step: _ => {}, isDone: false},\n    {position: {x: bounds.width / 2, y: bounds.height / 2}, step: _ => {}, isDone: false},\n  ]\n  otherBoidPool.push(...points);\n}\n\n/**\n * \n *  All Boids Draw Function\n * \n */\nfunction boidDrawFn(ctx, boid) {\n  let pos = boid.position,\n  velocity = boid.velocity,\n  magnitude = 3; \n  \n  let p1 = {\n    x: pos.x + velocity.y * magnitude / 3,\n    y: pos.y + velocity.x * magnitude / 3\n  }\n  \n  let p2 = {\n    x: pos.x + velocity.x * magnitude,\n    y: pos.y + velocity.y * magnitude\n  }\n  \n  let p3 = {\n    x: pos.x - velocity.y * magnitude / 3,\n    y: pos.y - velocity.x * magnitude / 3\n  }\n  \n  ctx.beginPath();\n  ctx.moveTo(p1.x, p1.y);\n  ctx.moveTo(p1.x, p1.y);\n  ctx.lineTo(p2.x, p2.y);\n  ctx.lineTo(p3.x, p3.y);\n  ctx.stroke();\n}\n\n/**\n * \n *  All Boids Update Function\n * \n */\nfunction boidUpdateFn({boid, otherBoidPool, boidPool, chaser, bounds, center}) {\n  let radius = bounds.height / 2.1\n  if(bounds.obstacleScale) {\n    radius = bounds.height / 2 - (bounds.height / 2) * (bounds.obstacleScale / 100)\n  }\n  let obstacleA = {x: bounds.width / 2, y: 0}; \n  let obstacleB = {x: bounds.width / 2, y: bounds.height}; \n  let aDist = boid.position.distanceSq(obstacleA);\n  let bDist = boid.position.distanceSq(obstacleB);\n\n  if(aDist < squared(radius)) {\n    boid.flee(Boid.vec2(obstacleA.x, obstacleA.y));\n  } else if(bDist < squared(radius)) {\n    boid.flee(Boid.vec2(obstacleB.x, obstacleB.y));\n  }\n  else if(Math.round(Math.random() * 3) === 3) {\n    boid.followPath(otherBoidPool.map(point => Boid.vec2(point.position.x, point.position.y)), false);\n  } else {\n    boid.flock(boidPool);\n  }\n  boid.update();\n}\n\n","import Boid from 'boid';\nimport { squared, min } from '../../components/helperFunctions';\n\n//////////////////////////////////////////////////\n//\n// School Simulation Settings\n//\n//////////////////////////////////////////////////\n\nexport default {\n  rafSettings: {fps: 60},\n  simulationSettings: {\n    simulationType: 'school',\n    cursorBoidSettings: {\n      isVisible: true,\n      cursorVisible: true,\n      clearFrames: true, \n      drawActiveBounds: false,\n      color: 'black',\n      fillColor: 'black',\n      strokeWidth: 6,\n      maxSpeed: 3,\n      initFn: cursorBoidInitFn,\n      updateFn: cursorUpdateFn,\n      drawFn: cursorDrawFn,\n      // cursorPos: bounds => {return {x: bounds.width / 2, y: bounds.height / 2}}\n    },\n    boidSettings: {\n      isVisible: true,\n      clearFrames: true, \n      drawActiveBounds: false, \n      count: 50, \n      minDistance: 30,\n      maxSpeed: 3,\n      maxDistance: 80,\n      avoidDistance: 80, \n      stroke: false, \n      fillColor: 'white',\n      strokeWidth: 2,\n      initFn: boidInitFn,\n      updateFn: boidUpdateFn,\n      drawFn: boidDrawFn, \n    }\n  }\n}\n\n/**\n * \n * Boid Initialization Function\n * \n */\nfunction boidInitFn(boidPool, bounds) {\n  boidPool.map(boid => {\n    boid.position.x = (bounds.width / 2) * Math.random() + bounds.width / 4;\n    boid.position.y = (bounds.height / 2) * Math.random() + bounds.height / 4;\n  })\n}\n\n/**\n * \n * Boid Update Function\n * \n */\nfunction boidUpdateFn({boid, boidPool, chaser, bounds, center}) {\n  if(boid.position.distanceSq(chaser) < squared(50)) {\n    boid.flee(chaser).update();\n  } else if(boid.position.distanceSq(center) > squared(bounds.width * 0.3) && Math.round(Math.random() * 3) <= 2) {\n    boid.seek(center).update();\n  } else {\n    boid.flock(boidPool).update();\n  }\n}\n\n/**\n * \n * Boid Draw Function\n * \n */\nfunction boidDrawFn(ctx, boid) {\n  // ctx.moveTo(boid.position.x - boid.velocity.x * 3, boid.position.y - boid.velocity.y * 3);\n  // ctx.lineTo(boid.position.x + boid.velocity.x * 3, boid.position.y + boid.velocity.y * 3);\n  ctx.beginPath();\n  ctx.ellipse(\n    boid.position.x, \n    boid.position.y, \n    2, \n    1 + Math.abs(3 * boid.velocity.y), \n    boid.velocity.angle + Math.PI / 2, \n    0, \n    2 * Math.PI);\n  ctx.fill();\n}\n\n/**\n * \n * Cursor Boid Initialization Function\n * \n */\nfunction cursorBoidInitFn(boid, bounds) {\n  boid.arriveThreshold = 200; \n  boid.position.x = bounds.width / 2;\n  boid.position.y = bounds.height / 2;\n}\n\n/**\n * \n * Cursor Boid Update Function\n * \n */\nfunction cursorUpdateFn({mousePos, boid}) {\n  if(boid.position.distanceSq(mousePos) < squared(20)) {\n    boid.velocity.x *= 0.9;\n    boid.velocity.y *= 0.9;\n    boid.update();\n  } else {\n    boid.seek(Boid.vec2(mousePos.x, mousePos.y)).update();   \n  }\n}\n\n\n/**\n * \n * Cursor Boid Draw Function\n * \n */\nfunction cursorDrawFn(ctx, boid) {\n  ctx.beginPath();\n  let vX = boid.velocity.x * 3.3;\n  let vY = boid.velocity.y * 3.3;\n  ctx.moveTo(boid.position.x - vX, boid.position.y - vY)\n  ctx.lineTo(boid.position.x + vX, boid.position.y + vY);\n  ctx.stroke()\n  // ctx.fillStyle = 'black';\n  // ctx.beginPath();\n  // ctx.ellipse(\n  //   boid.position.x, \n  //   boid.position.y, \n  //   5, \n  //   2 + Math.abs(3 * boid.velocity.length), \n  //   boid.velocity.angle + Math.PI / 2, \n  //   0, \n  //   2 * Math.PI);\n  // ctx.fill();\n}\n","import Boid from 'boid';\nimport { CanvasTransition, squared } from '../../components/helperFunctions';\n\n//////////////////////////////////////////////////\n//\n// Crowd Simulation Settings\n//\n//////////////////////////////////////////////////\n\nlet settingsFps = 40;\n\nexport default {\n  rafSettings: {fps: settingsFps},\n  simulationSettings: {\n    simulationType: 'crowds',\n    cursorBoidSettings: {\n      isVisible: true,\n      cursorVisible: true,\n      clearFrames: true, \n      width: 6,\n      maxSpeed: 3,\n      // clickFn: cursorClickFn,\n      // initFn: cursorBoidInitFn,\n      // updateFn: cursorBoidUpdateFn, \n      // drawFn: cursorBoidDrawFn,\n    },\n    boidSettings: {\n      isVisible: true,\n      clearFrames: true, \n      drawActiveBounds: false, \n      count: 20, \n      maxSpeed: 1.5,\n      // stroke: false,\n      // strokeColor: 'white',\n      strokeWidth: 1,\n      mass: 2,\n      maxForce: 50,\n      minDistance: 25,\n      maxDistance: 25,\n      avoidDistance: 80, \n      arriveThreshold: 80,\n      initFn: boidInitFn,\n      updateFn: boidUpdateFn,\n      drawFn: boidDrawFn, \n    }\n  }\n}  \n\n/**\n * \n *  All Boids Initialization Function\n * \n */\nfunction boidInitFn(boidPool, bounds, otherBoidPool) {\n  let points = [\n    {position: {x: bounds.width / 3 * 1, y: bounds.height / 3 * 1}, step: _ => {}, isDone: false},\n    {position: {x: bounds.width / 3 * 2, y: bounds.height / 3 * 1}, step: _ => {}, isDone: false},\n    {position: {x: bounds.width / 3 * 2, y: bounds.height / 3 * 2}, step: _ => {}, isDone: false},\n    {position: {x: bounds.width / 3 * 1, y: bounds.height / 3 * 2}, step: _ => {}, isDone: false},\n  ]\n\n  boidPool.map((boid, i) => {\n    // boid.position.x = (Math.random() - 0.5) * 120 + (bounds.width / 4);\n    // boid.position.y = (bounds.height / 2) * Math.random() + bounds.height / 4;\n    if(i % 2 === 0) {\n      boid.position.x = points[0].position.x + (Math.random() - 0.5) * 30; \n      boid.position.y = points[0].position.y + (Math.random() - 0.5) * 30;\n      boid.followPath(points.map(point => Boid.vec2(point.position.x, point.position.y)), true); \n      boid.userData.movingClockwise = true;\n    } else {\n      boid.position.x = points[3].position.x + (Math.random() - 0.5) * 30;\n      boid.position.y = points[3].position.y + (Math.random() - 0.5) * 30;\n      boid.followPath(points.map(point => Boid.vec2(point.position.x, point.position.y)).reverse(), true);\n      boid.userData.movingClockwise = false;\n    }\n  })\n\n  otherBoidPool.push(...points);\n}\n\n/**\n * \n * Boid Update Function\n * \n */\nfunction boidUpdateFn({boid, boidPool, otherBoidPool, chaser, bounds, center}) {\n  let aBoids = boidPool.filter(boid => boid.userData.movingClockwise),\n      bBoids = boidPool.filter(boid => !boid.userData.movingClockwise);\n\n\n  // Keep boids in the crosswalks\n  let \n    xLeft = otherBoidPool[0].position.x,\n    xRight = otherBoidPool[1].position.x,\n    yTop = otherBoidPool[0].position.y,\n    yBottom = otherBoidPool[3].position.y,\n    laneWidth = 10,\n    pos = boid.position; \n\n  // // Inside center rect\n  // if(\n  //   pos.x < (xRight - laneWidth) && \n  //   pos.x > (xLeft + laneWidth) &&\n  //   pos.y < (yBottom - laneWidth) &&\n  //   pos.y > (yTop + laneWidth)\n  // ) {\n  //   boid.velocity.x = 0;\n  //   boid.velocity.y = 0;\n  //   boid.flee(Boid.vec2(center.x, center.y));\n  // }\n\n  // if(\n  //   pos.x > (xRight + laneWidth) || \n  //   pos.x < (xLeft - laneWidth) ||\n  //   pos.y > (yBottom + laneWidth) ||\n  //   pos.y < (yTop - laneWidth) \n  // ) {\n  //   boid.velocity.x = 0;\n  //   boid.velocity.y = 0;\n  //   boid.seek(Boid.vec2(center.x, center.y));\n  // }\n   \n  boidPool.map(otherBoid => {\n    if(otherBoid !== boid) {\n      if(otherBoid.position.distanceSq(boid.position) < squared(14)) {\n        boid.flee(otherBoid.position); \n      }\n    }\n  })\n\n  if(boid.userData.movingClockwise) {\n    // boid.followPath([otherBoidPool[0], otherBoidPool[2]].map(point => Boid.vec2(point.position.x, point.position.y)), true);\n    boid.followPath(otherBoidPool.map(point => Boid.vec2(point.position.x, point.position.y)), true);\n  } else {\n    // boid.followPath([otherBoidPool[1], otherBoidPool[3]].map(point => Boid.vec2(point.position.x, point.position.y)), true);\n    // boid.followPath(otherBoidPool.map(point => Boid.vec2(point.position.x, point.position.y)).reverse(), true);\n    boid.followPath(otherBoidPool.map(point => Boid.vec2(point.position.x, point.position.y)).reverse(), true);\n  }\n  boid.update();\n}\n\n/**\n * \n * Boids Draw Function\n */\nfunction boidDrawFn(ctx, boid) {\n\n  ctx.beginPath();\n  if(boid.userData.movingClockwise) {\n    ctx.fillStyle = '#555';\n  }\n  else {\n    ctx.fillStyle = '#eee';\n  }\n  // // ctx.strokeRect(boid.position.x, boid.position.y, 5, 5);\n  // ctx.moveTo(boid.position.x - boid.velocity.x * 4, boid.position.y - boid.velocity.y * 4);\n  // ctx.lineTo(boid.position.x + boid.velocity.x * 4, boid.position.y + boid.velocity.y * 4);\n  ctx.ellipse(\n    boid.position.x, \n    boid.position.y, \n    4, \n    4, \n    boid.velocity.angle + Math.PI / 2, \n    0, \n    2 * Math.PI);\n  // ctx.stroke();\n  ctx.fill();\n}","import Boid from 'boid';\nimport { CanvasTransition, squared } from '../../components/helperFunctions';\n\n//////////////////////////////////////////////////\n//\n// Mold Simulation Settings\n//\n//////////////////////////////////////////////////\n\nconst settingsFps = 20;\n\nexport default {\n  rafSettings: {\n    fps: settingsFps,\n  },\n  simulationSettings: {\n    simulationType: 'mold',\n    cursorBoidSettings: {\n      isVisible: true,\n      cursorVisible: true,\n      clearFrames: true, \n      width: 4,\n      maxSpeed: 30,\n      clickFn: cursorClickFn,\n      initFn: cursorBoidInitFn,\n      updateFn: cursorBoidUpdateFn, \n      drawFn: cursorBoidDrawFn,\n    },\n    boidSettings: {\n      isVisible: true,\n      clearFrames: true, \n      drawActiveBounds: false, \n      count: 100, \n      maxSpeed: 1,\n      minDistance: 50, \n      maxDistance: 200, \n      strokeColor: 'white',\n      strokeWidth: 1,\n      arriveThreshold: 80,\n      // initFn: boidInitFn,\n      updateFn: boidUpdateFn,\n      drawFn: boidDrawFn, \n      clickFn: boidClickFn,\n      otherBoidDrawFn: otherBoidDrawFn, \n      edgeBehavior: 'bounce',\n    }\n  }\n}\n\n/**\n * \n * Cursor Boid Initializaion Function\n */\nfunction cursorBoidInitFn(boid) {\n  boid.maxSpeed = 30;\n  boid.velocity.x = 0;\n  boid.velocity.y = 0;\n  boid.maxForce = 10;\n}\n\n/**\n * \n * Cursor Boid Update Function\n */\nfunction cursorBoidUpdateFn({mousePos, boid, bounds}) {\n  boid.position.x = boid.position.x + ((mousePos.x - boid.position.x) / 1.5);\n  boid.position.y = boid.position.y + ((mousePos.y - boid.position.y) / 1.5);\n}\n\n/**\n * \n * Cursor Boid Draw Function\n */\nfunction cursorBoidDrawFn(ctx, boid, bounds) {\n  ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';\n  ctx.arc(boid.position.x, boid.position.y, 6, 0, 2 * Math.PI);\n  ctx.fill();\n}\n\n/**\n * \n * Cursor Click Function\n */\nfunction cursorClickFn({mousePos, drawBuffer}) {\n  const ripple = new CanvasTransition({\n    startValue: 0, \n    endValue: 100, \n    durationMs: 666, \n    fps: settingsFps, \n    position: mousePos,\n    onStep: (per, ctx) => {\n      ctx.strokeStyle = `rgba(0, 0, 0, ${1 - per / 100})`;\n      ctx.lineWidth = 1\n      ctx.beginPath();\n      ctx.arc(mousePos.x, mousePos.y, 25 * (per / 100), 0, 2 * Math.PI);\n      ctx.stroke();\n    }\n  })\n  drawBuffer.push(ripple);\n}\n\n/**\n * \n * All Boids Click Function\n */\nfunction boidClickFn(mousePos, boidPool, otherBoidPool, bounds) {\n  let foodBoid = new Boid(); \n  foodBoid.position.x = mousePos.x;\n  foodBoid.position.y = mousePos.y;\n  foodBoid.velocity.x = 0;\n  foodBoid.velocity.y = 0;\n  foodBoid.userData.pheremoneDist = 45;\n  foodBoid.userData.step = ctx => {\n    ctx.strokeStyle = 'yellow';\n    ctx.lineWidth = 0.5;\n    ctx.beginPath();\n    ctx.arc(mousePos.x, mousePos.y, 4, 0, 2 * Math.PI);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.strokeStyle = 'white';\n    ctx.arc(mousePos.x, mousePos.y, 30, 0, 2 * Math.PI);\n    ctx.stroke();\n  }\n\n  if(otherBoidPool.length >= 5) {\n    otherBoidPool.shift();\n  } \n  otherBoidPool.push(foodBoid);\n}\n\n/**\n * \n *  Boid Update Function\n * \n */\nfunction boidUpdateFn({boid, otherBoidPool, boidPool, chaser, bounds, center}) {\n  let close = false; \n\n  // if(Math.round(Math.random() * 200) === 1) {\n  //   boid.position.x = Math.round(Math.random() * bounds.width); \n  //   boid.position.y = Math.round(Math.random() * bounds.height); \n  // }\n  if(otherBoidPool.length > 0) {\n    boid.userData.neighborPos = []; \n    // Seek food within 100px range\n    otherBoidPool\n      .filter(foodBoid => boid.position.distanceSq(foodBoid.position) < squared(foodBoid.userData.pheremoneDist * 1.2))\n      .map(foodBoid => {\n        if(boid.position.distanceSq(foodBoid.position) < squared(foodBoid.userData.pheremoneDist)) {\n          boid.flee(Boid.vec2(foodBoid.position.x, foodBoid.position.y));\n          boid.userData.pheremoneDist = foodBoid.userData.pheremoneDist * .9;\n          boid.userData.neighborPos.push(foodBoid.position);\n          close = true; \n        } else {\n          boid.seek(Boid.vec2(foodBoid.position.x, foodBoid.position.y));  \n        }\n      });\n\n    boidPool\n      .filter(otherBoid => otherBoid.userData.pheremoneDist > 0)\n      .filter(otherBoid => boid.position.distanceSq(otherBoid.position) < squared(otherBoid.userData.pheremoneDist * 1.2))\n      .map(otherBoid => {\n        if(otherBoid !== boid) {\n          if(boid.position.distanceSq(otherBoid.position) < squared(otherBoid.userData.pheremoneDist)) {\n            boid.flee(Boid.vec2(otherBoid.position.x, otherBoid.position.y)); \n            boid.userData.pheremoneDist = otherBoid.userData.pheremoneDist * .9;\n            boid.userData.neighborPos.push(otherBoid.position);\n            close = true; \n          } else {\n            boid.seek(Boid.vec2(otherBoid.position.x, otherBoid.position.y));\n          }\n        }\n      });\n\n    if(!close) {\n      boid.userData.pheremoneDist = 0; \n    }\n  } else {\n    boid.wander();\n  }\n\n  boid.update();\n}\n\nfunction otherBoidDrawFn(ctx, boid) {\n  // ctx.strokeStyle = 'yellow';\n  // ctx.beginPath();\n  // ctx.arc(boid.position.x, boid.position.y, 4, 0, 2 * Math.PI);\n  // ctx.stroke();\n}\n\nfunction boidDrawFn(ctx, boid) {\n  ctx.strokeRect(boid.position.x - 2, boid.position.y - 2, 4, 4);\n  // window.cout(300, boid.userData)\n  if(boid.userData.pheremoneDist > 0) {\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba(255,255,255, 0.05)';\n    ctx.arc(boid.position.x, boid.position.y, boid.userData.pheremoneDist * 0.5, 0, 2 * Math.PI);\n    ctx.fill();\n  }\n  // boid.userData.neighborPos && boid.userData.neighborPos.map(pos => {\n  //   ctx.beginPath();\n  //   ctx.strokeStyle = 'rgba(255,255,255, 0.5)';\n  //   ctx.moveTo(boid.position.x, boid.position.y);\n  //   ctx.lineTo(pos.x, pos.y);\n  //   ctx.stroke();\n  // })\n  // if(boid.userData.neighborPos) {\n  //   bo\n  //   // ctx.beginPath();\n  //   // ctx.strokeStyle = 'rgba(255,255,255, 0.5)';\n  //   // ctx.arc(boid.position.x, boid.position.y, boid.userData.pheremoneDist * 0.5, 0, 2 * Math.PI);\n  //   // ctx.moveTo(boid.position.x, boid.position.y);\n  //   // ctx.lineTo(boid.userData.nearestPherPos.x, boid.userData.nearestPherPos.y);\n  //   // ctx.stroke();\n  // }\n}\n\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"polygon\", {\n  points: \"414.5 209.5 414.5 0.5 0.5 0.5 0.5 209.5 64.03 297 74.35 283 151 399.5 263 399.5 297.34 339.5 307.67 353.5 414.5 209.5\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"cave-top\",\n    viewBox: \"0 0 415 400\"\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/cave-top.c5c63dcf.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"polygon\", {\n  points: \"0.5 189.5 0.5 398.5 414.5 398.5 414.5 189.5 414.27 189.5 326.75 66.5 316.42 80.5 263.5 0.5 151.77 0.5 86.5 104.5 69.5 95.5 1.27 189.5 0.5 189.5\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    className: \"cave-bottom\",\n    viewBox: \"0 0 415 400\"\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/cave-bottom.66f78c31.svg\";\nexport { SvgComponent as ReactComponent };","import React, { Component } from 'react';\nimport CanvasBase from '../components/canvasBase';\nimport RafController from '../components/rafController';\nimport SimulationController from './simulationController';\nimport defaultSettings from './settings/default';\nimport trafficSettings from './settings/traffic';\nimport colonySettings from './settings/colony';\nimport schoolSettings from './settings/school';\nimport crowdsSettings from './settings/crowds';\nimport moldSettings from './settings/mold'; \nimport { ReactComponent as CaveTop }  from '../assets/cave-top.svg';\nimport { ReactComponent as CaveBottom }  from '../assets/cave-bottom.svg';\nimport deepmerge from 'deepmerge';\nimport classnames from 'classnames';\nimport throttle from 'lodash/throttle';\nimport has from 'lodash/has';\n\n\n//////////////////////////////////////////////////\n//\n// Simulation Base\n//\n//////////////////////////////////////////////////\n\nexport default class SimulationWrapper extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      width: false,\n      height: false,\n    }\n\n    this.simulationRef = React.createRef();\n    this.cursorIconRef = React.createRef(); \n    this.caveRef = React.createRef(); \n    \n    this.hoistCanvas = (_canvas, _ctx) => {\n      this.ctx = _ctx;\n      this.canvas = _canvas; \n      this.canvasRect = this.canvas.getBoundingClientRect(); \n    }\n    this.throttleResize = throttle(this.handleWindowSizeChange, 333);\n    this.throttledCrowdClick = throttle(this.handleCrowdClick, 1000);  \n  }\n\n  onMouseMove = (e) => {\n    if(this.canvasRect && this.rafController && this.rafController.ticker % 4 === 0) {\n      this.mousePos.x = e.clientX - this.canvasRect.left;\n      this.mousePos.y = e.clientY - this.canvasRect.top;\n    }\n  }\n\n  onMouseClick = (e) => {\n    if(this.canvasRect) {\n      this.mousePos.x = e.clientX - this.canvasRect.left;\n      this.mousePos.y = e.clientY - this.canvasRect.top;\n    }\n    if(this.simulationController) {\n      this.simulationController.onClick({...this.mousePos}); \n    }\n  }\n\n  handleCrowdClick = (val) => {\n    if(this.simulationController) {\n      this.simulationController.handleCrowdClick(val); \n    }\n  }\n\n  handleWindowSizeChange = () => {\n    let simRect = this.simulation.getBoundingClientRect(); \n    // console.log('resize', simRect)\n    // let prevWidth = this.width; \n    // let prevHeight = this.height; \n    this.width = simRect.width;\n    this.height = simRect.height;\n    let newBounds = {x: this.width, y: this.height}; \n\n    // Simulation controller update\n    // this.simulationController.resize(newBounds);\n\n    // // Sets the state to force a rerender of the canvas. \n    this.setState({\n      width: this.width,\n      height: this.height,\n    });\n  }\n\n  componentDidMount() {\n    // Resize listener\n    window.addEventListener('resize', this.throttleResize);\n\n    if(this.caveRef) {\n      this.caveContainer = this.caveRef.current; \n    }\n    if(this.simulationRef) {\n      this.simulation = this.simulationRef.current; \n      let simRect = this.simulation.getBoundingClientRect(); \n      \n      // Defines bounds based on the simulation size. \n      this.width = simRect.width;\n      this.height = simRect.height;\n      this.mousePos = {x: 0, y: -10};\n      this.center = {x: this.width / 2, y: this.height / 2};\n\n      this.buildSimulation(); \n\n      // Sets the state to force a rerender of the canvas. \n      this.setState({\n        width: this.width,\n        height: this.height,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.rafController.stopLoop();\n    window.removeEventListener('resize', this.throttleResize);\n  }\n\n  buildSimulation() {\n    // if(this.state.width && this.state.height) {\n    switch(this.props.curSystem.path) {\n      case 'traffic':\n        this.currentSettings = deepmerge(defaultSettings, trafficSettings);\n        break;\n      case 'colony':\n        this.currentSettings = deepmerge(defaultSettings, colonySettings);\n        break;\n      case 'school':\n        this.currentSettings = deepmerge(defaultSettings, schoolSettings);\n        break;\n      case 'crowds':\n        this.currentSettings = deepmerge(defaultSettings, crowdsSettings);\n        break;\n      case 'mold':\n        this.currentSettings = deepmerge(defaultSettings, moldSettings);\n        break;\n      default: \n        console.error('Simulation type does not match setting.');\n        break;      \n    }\n\n    if(this.rafController) {\n      this.rafController.stopLoop();\n    }\n    this.rafController = new RafController({fps: this.currentSettings.rafSettings.fps});\n    \n    if(has(this.currentSettings.simulationSettings.cursorBoidSettings, 'mousePos')) {\n      this.mousePos = this.currentSettings.simulationSettings.cursorBoidSettings.mousePos(this.bounds);\n    } else {\n      this.mousePos = {x: 0, y: -10};\n    }\n\n    // Creates the simulation controller for the simulation. \n    this.simulationController = new SimulationController({\n      width: this.width,\n      height: this.height,\n      caveContainer: this.caveContainer,\n      ...this.currentSettings.simulationSettings\n    });\n\n    // Uses the rafController to execute the sim at a specified frame rate. \n    this.rafController.onStep = ticker => {\n      if(this.ctx) {\n        this.simulationController.step(this.ctx, this.mousePos);\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    // If the simulation path changed, update hte simulation controller.\n    if(prevProps.curSystem.path !== this.props.curSystem.path) {\n      this.buildSimulation();\n    }\n  }\n\n  render() {\n    return (\n      <div \n        className={classnames('simulation-canvas', this.props.path)} \n        ref={this.simulationRef} \n        onMouseMove={this.onMouseMove}\n        onClick={this.onMouseClick}\n        style={this.styles}\n      > \n        <CanvasBase hoistCanvas={this.hoistCanvas}/>\n        {this.props.curSystem.path === 'colony' && \n          (\n            <div className='cave-graphics' ref={this.caveRef}>\n              <CaveTop/>\n              <CaveBottom/>\n            </div>\n          )\n        }\n        {this.props.curSystem.path === 'crowds' && \n          <div className='crowds-buttons' ref={this.crowdsRef}>\n            {[20, 60, 110].map((val, i) => (\n              <button \n                key={`crowd-button-${i}`}\n                className='crowd-button unbuttoned' \n                onClick={_ => this.throttledCrowdClick(val)}\n                style={{width: `${((i + 2) * 10)}px`, height: `${((i + 2) * 10)}px`}}\n              />)\n            )}\n          </div>\n        }\n      </div>\n    );\n  }\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport { Link, withRouter } from 'react-router-dom'\nimport { ReactComponent as Squiggle } from '../assets/squiggle.svg';\nimport { ReactComponent as Arrow } from '../assets/arrow.svg';\nimport { ReactComponent as Pentagon } from '../assets/pentagon.svg';\nimport { SimpleFade } from '../components/fadeWrapper';\nimport ColoredPentagonSvg from '../components/coloredPentagonSvg';\nimport SimulationWrapper from '../simulations/simulationWrapper';\nimport SvgOutline from '../components/svgOutline';\nimport ButtonWrapper from '../components/buttonWrapper'\nimport throttle from 'lodash/throttle';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport classnames from 'classnames';\nimport data from '../data/data';\n\n//////////////////////////////////////////////////\n//\n// Simulation Page\n//\n//////////////////////////////////////////////////\n\nclass SimulationPage extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      mounted: false,\n      hideOverlay: false,\n    }\n\n    this.fadeDuration = 333;\n    this.throttledNextClick = throttle(_ => {\n      // console.log(props.nextSystem.path);\n      props.history.push(`/simulation/${props.nextSystem.path}`);\n      props.onNextClick();\n    }, 999);\n  }\n\n  componentDidMount() {\n    // setTimeout(_ => {\n      this.setState({ mounted: true });\n    // }, (0));\n    this.overlayTimeout = setTimeout(_ => {\n      this.setState({ hideOverlay: true });\n    }, 9000)\n  }\n\n  handleOverlayClick = () => {\n    clearTimeout(this.overlayTimeout);\n    this.setState({ hideOverlay: true });\n  }\n\n  handleQuestionClick = () => {\n    clearTimeout(this.overlayTimeout);\n    this.setState(prevState => { return { hideOverlay: !prevState.hideOverlay } })\n  }\n\n  componentDidUpdate(prevProps) {\n    // If the simulation path changed, update the simulation controller.\n    if (prevProps.curSystem.path !== this.props.curSystem.path) {\n      clearTimeout(this.overlayTimeout);\n      this.setState({ hideOverlay: false })\n      this.overlayTimeout = setTimeout(_ => {\n        this.setState({ hideOverlay: true });\n      }, 8000)\n    }\n  }\n\n  render() {\n    let { curSystem = {}, nextSystem = {}, onNextClick } = this.props;\n\n    let {\n      index = 0,\n      question = \"question\",\n      path = 'path',\n      instructions = 'Chase the fish to see how they follow their neighbors, and avoid predators.',\n      instructionPng,\n      coverImage,\n    } = curSystem;\n\n    let {// path: nextPath,\n      nextButtonTitle = '',\n    } = nextSystem;\n    console.log(curSystem.color)\n    return (\n      <div className={classnames('page-wrapper', 'simulation-page', path)}>\n        {this.state.mounted &&\n          <TransitionGroup className='page-inner'>\n            <CSSTransition classNames='simulation-transition' key={curSystem.path} timeout={3000} >\n            <span>\n            <span className='content'>\n              <section className='nav-placeholder' />\n              <section className='description-panel'>\n                <SimpleFade shouldUpdate={curSystem.question} shouldRender={this.state.mounted} duration={this.fadeDuration}>\n                  <h2 className='question'>{question}</h2>\n                  <Squiggle className='squiggle' />\n                </SimpleFade>\n                <SimpleFade shouldUpdate={curSystem.interactions} shouldRender={this.state.mounted} duration={this.fadeDuration}>\n                  <h3 className='answer'>Answer</h3>\n                  {curSystem.interactions.map((interaction, v) =>\n                    <h4 key={`${curSystem.path}-interaction-${v}`} >\n                      {interaction}\n                    </h4>\n                  )}\n                  <Link to={`/selector`}>\n                    <Pentagon style={{ fill: 'none', stroke: 'black', strokeWidth: '2' }} />\n                    <ColoredPentagonSvg className='colored-pentagon' colors={data.systems.map(system => system.color)} />\n                  </Link>\n                </SimpleFade>\n              </section>\n              <section className={classnames('simulation-panel', { 'overlay-hidden': this.state.hideOverlay })}>\n                <SimpleFade shouldUpdate={curSystem.path} shouldRender={this.state.mounted} duration={this.fadeDuration}>\n                  <SimulationWrapper curSystem={curSystem} />\n                  <div className='instructions-overlay' onClick={this.handleOverlayClick}>\n                    <div className='overlay-inner'>\n                      <span className='content'>\n                        {/* <h3 className='index'>{index + 1}/5</h3> */}\n                        {instructions}\n                        <span className='instruction-graphic'>\n                          <img src={instructionPng} alt='simulation_instruction_graphic' />\n                        </span>\n                        <button className='close-button'><span>X</span></button>\n                      </span>\n                    </div>\n                  </div>\n                  <ButtonWrapper className='show-instructions-button' onClick={this.handleQuestionClick}>?</ButtonWrapper>\n                  <ButtonWrapper\n                    className='next-sim'\n                    onClick={_ => {\n                      this.props.history.push(`/simulation/${this.props.nextSystem.path}`);\n                      this.props.onNextClick();\n                    }}>\n                    <h4>next</h4>\n                    <h3>{nextButtonTitle}</h3>\n                    <SvgOutline component={Arrow} color='black' style={{ transform: 'rotate(180deg)' }} />\n                  </ButtonWrapper>\n                </SimpleFade>\n              </section>\n            </span>\n              <span className='simulation-backgrounds'>\n                <div className='color-front' style={{ background: curSystem.color }}></div>\n                <div className='texture'></div>\n                <img className='system-image' alt={coverImage.alt || 'TODO'} src={coverImage.src}></img>\n                <div className='color-back' style={{ background: curSystem.color }}></div>\n              </span>\n              </span>\n            </CSSTransition>\n          </TransitionGroup>}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    nextSystem: state.nextSystem,\n    curSystem: state.curSystem,\n    lastChange: state.lastChange,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onNextClick: id => {\n      dispatch({ type: 'NEXT_SYSTEM' });\n    },\n    onPrevClick: id => {\n      dispatch({ type: 'PREV_SYSTEM' });\n    },\n    onPath: path => {\n      dispatch({ type: 'SYSTEM_FROM_PATH', path: path })\n    }\n  }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SimulationPage))\n\n","import React, { Component } from 'react';\n// import { TransitionGroup, CSSTransition } from \"react-transition-group\";\n// import { SimpleFade } from '../components/fadeWrapper';\nimport ButtonWrapper from '../components/buttonWrapper';\nimport { ReactComponent as Pentagon } from '../assets/pentagon.svg'; \nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport data from '../data/data';\n\n//////////////////////////////////////////////////\n//\n// Mobile Page\n//\n//////////////////////////////////////////////////\n\nclass MobilePage extends Component {\n  constructor() {\n    super()\n    this.state = {\n      openSystemId: false, \n    }\n    this.fadeDuration = 333;\n  }\n\n  handleScroll = (e) => {\n    if(e.target.scrollTop <= 1) {\n      this.props.setHasScrolled(false);\n    } else {\n      this.props.setHasScrolled(true);\n    }\n  }\n  \n  onSystemAboutClick = (e, i, systemAlreadyOpen) => {\n    if(systemAlreadyOpen) {\n      this.setState({openSystemId: false})\n    } else {\n      this.setState({openSystemId: i})\n    }\n  }\n\n  render() {\n    return (\n      <div className={'page-wrapper mobile-page'} onScroll={this.handleScroll}>\n        <section className='content'>\n          <div className='intro-block'>\n            <h2 className='project-title'>{process.env.REACT_APP_PROJECT_TITLE}</h2>\n            <p dangerouslySetInnerHTML={{__html: data.description}}></p>\n          </div>\n          <div className='systems-container'>\n            {data.systems.map((system, i) => \n              {\n                let isOpen = i === this.state.openSystemId; \n                return (\n                  <div key={system.path} className={classnames('system-block', {open: isOpen})} >\n                    <h3 className='question'>{system.question}</h3>\n                    <div className='preview-video-container' style={{background: system.color}}>\n                      <video className='video' width=\"680\" height=\"520\" autoPlay loop muted>\n                        <source src={system.previewVideo.src} type=\"video/mp4\"></source>\n                        Your browser does not support the video tag.\n                      </video>\n                    </div>\n                    {/* <img className='preview' src={system.previewImage.src} alt={system.previewImage.alt} /> */}\n                    <ButtonWrapper \n                      className='active-button' \n                      onClick={e => this.onSystemAboutClick(e, i, isOpen)}\n                    >\n                      <div className='slider'>\n                        <div>ABOUT</div><div>CLOSE</div>\n                      </div>\n                    </ButtonWrapper>\n                    <div className='answer-block'>\n                      <h3 className='answer'>Answer</h3>\n                      {system.interactions.map((interaction, v) => \n                        <h4 \n                          key={`${system.path}-interaction-${v}`}\n                          style={{transitionDelay: isOpen ? `${v * 222 + 666}ms` : '0ms'}}                        \n                        >\n                          {interaction}\n                        </h4>\n                      )}\n                    </div>\n                  </div>\n                )\n              }\n            )}\n          </div>\n          <div className='outro-block'>\n            <Pentagon/>\n            <h4>To interact with each emergent system, visit the site on a desktop device.</h4>\n          </div>\n        </section>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    nextSystem: state.nextSystem,\n  }\n}\n\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    setHasScrolled: hasScrolled => {\n      dispatch({type: 'SCROLL_CHANGE', pageHasScrolled: hasScrolled}); \n    },\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MobilePage);\n","import React from 'react';\nimport {Route, Switch, Redirect} from 'react-router-dom'\nimport { CSSTransition } from \"react-transition-group\";\nimport { connect } from 'react-redux';\nimport MobileRedirect from '../components/mobileRedirect';\n// const IntroPage = lazy(() => import('../pages/introPage'));\n// const AboutPage = lazy(() => import('../pages/aboutPage'));\n// const SelectorPage = lazy(() => import('../pages/selectorPage'));\n// const SimulationPage = lazy(() => import('../pages/simulationPage'));\n// const MobilePage = lazy(() => import('../pages/mobilePage'));\nimport IntroPage from '../pages/introPage';\nimport AboutPage from '../pages/aboutPage';\nimport SelectorPage from '../pages/selectorPage'; \nimport TransitionPage from '../pages/transitionPage'; \nimport SimulationPage from '../pages/simulationPage'; \nimport MobilePage from '../pages/mobilePage'; \n\n//////////////////////////////////////////////////\n//\n// Page Resolver\n//\n//////////////////////////////////////////////////\n\nfunction PageResolver({prevLocation, location}) {\n  const routes = [\n    { path: '/', name: 'Intro', Component: IntroPage },\n    { path: '/about', name: 'About', Component: AboutPage },\n    { path: '/selector', name: 'Home', Component: SelectorPage },\n    { path: '/transition/:type', name: 'Transition', Component: TransitionPage },\n    { path: '/simulation/:type', name: 'Simulation', Component: SimulationPage },\n    { path: '/mobile', name: 'Mobile', Component: MobilePage },\n  ]\n  // console.log(`route-change, \n  //   from: ${prevLocation},\n  //   to: ${location.pathname}\n  // `)\n  let prevPath = prevLocation.split('/')[1] !== location.pathname.split('/')[1] ? prevLocation.split('/')[1] : 'undef';\n  return(\n    <React.Fragment>\n      <MobileRedirect></MobileRedirect>\n      {routes.map(({path, Component}) => {\n        return (\n        <Route key={path} exact path={path}>\n          {({match}) => (\n            <CSSTransition \n              in={match != null} \n              // timeout={{enter: 10000, exit: 10000}} \n              timeout={{enter: 2200, exit: 2200}} \n              classNames={`${prevPath}-prev page-transition`}\n              // classNames={`transition-to-${match && match.path.split('/')[1] || location.pathname.split('/')[1]}`} \n              unmountOnExit\n            >\n              <Component />\n            </CSSTransition>\n          )}\n        </Route>)\n      })}\n      <Switch>\n        <Redirect exact from=\"/transition/\" to='/selector' />\n        <Redirect exact from=\"/simulation/\" to='/simulation/traffic' />\n      </Switch>\n    </React.Fragment>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    prevLocation: state.prevLocation,  \n  }\n}\n\n\nexport default connect(mapStateToProps)(PageResolver)","import React, { Component, Fragment } from 'react';\nimport {Route} from 'react-router-dom'\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\nimport background from '../assets/background-texture-white.jpg'; \nimport { connect } from 'react-redux'\nimport { SimpleFade } from '../components/fadeWrapper';\n\n//////////////////////////////////////////////////\n//\n// Background Resolver\n//\n//////////////////////////////////////////////////\n\nclass BackgroundResolver extends Component{\n  constructor(props) {\n    super(props)\n    this.state = {\n      mounted: false\n    }\n  }\n\n  componentDidMount() {\n    this.setState({mounted: true})\n  }\n  \n  render() {\n    const {location, curSystem = {}} = this.props;\n    return(\n      <TransitionGroup className={`background ${location.pathname.split('/')[1]}`}>\n        <CSSTransition key={curSystem.coverImage.src} timeout={{enter: 666, exit: 333}} classNames='back'>\n          <Route path=\"/(selector|transition|simulation|mobile|about)\" render={_ => {\n            let {coverImage = '', icon, color} = curSystem;\n            let Icon = icon; \n            return(\n              <div className='content'>\n                <SimpleFade shouldRender={this.state.mounted} duration={333}>\n                  <img className='system-image' alt={coverImage.alt || 'TODO'} src={coverImage.src}></img>\n                  <Icon className='system-icon' style={{fill: color}}/>\n                </SimpleFade>\n              </div>\n            )}\n          }  \n          />\n        </CSSTransition>\n        <img className='texture' alt='background_texture' src={background}></img>  \n      </TransitionGroup>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {curSystem: state.curSystem}\n}\n\nexport default connect(mapStateToProps)(BackgroundResolver);\n\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom';\nimport NavResolver from './navResolver'; \nimport PageResolver from './pageResolver';\nimport BackgroundResolver from './backgroundResolver'; \n\n//////////////////////////////////////////////////\n//\n// Content Wrapper\n//\n//////////////////////////////////////////////////\n\nclass ContentWrapper extends Component{\n  constructor(props) {\n    super(props)\n\n    // Checks if the url is a simulation, then initializes the store with that sim. \n    let simRegex = /\\/(simulation|transition)\\/([A-Za-z]+)/\n    let matches = props.location.pathname.match(simRegex); \n    let simulationPath; \n\n    if(matches && matches.length > 0 && typeof(matches[2]) != 'undefined') {\n      simulationPath = matches[2]; \n      // console.log('wrapper constructor', 'update');\n      props.updateCurrentSystem(simulationPath);\n    } \n    // Forces restart of experience\n    props.history.push('/');\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if(this.props.location && nextProps && nextProps.location && this.props.location !== nextProps.location) {\n      this.props.updatePrevLocation(this.props.location.pathname); \n      this.props.setHasScrolled(false);\n    }\n  }\n\n  render() {\n    let {location} = this.props;\n\n    return(\n      <div className='app'>\n        <NavResolver location={location}/>\n        <PageResolver location={location}/>\n        <BackgroundResolver location={location}/>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    prevLocation: state.prevLocation,  \n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    updateCurrentSystem: path => {\n      dispatch({type: 'SYSTEM_FROM_PATH', path: path}); \n    },\n    updatePrevLocation: prevLocation => {\n      dispatch({type: 'SET_PREV_LOCATION', prevLocation: prevLocation}); \n    },\n    setHasScrolled: hasScrolled => {\n      dispatch({type: 'SCROLL_CHANGE', pageHasScrolled: hasScrolled}); \n    },\n  }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(ContentWrapper))","import React from 'react';\nimport {HashRouter} from 'react-router-dom';\nimport {Provider} from 'react-redux';\nimport store from './redux/store';\nimport ContentWrapper from './pages/contentWrapper';\n// import ContentWrapper from './pages/contentWrapper';\nimport './styles/index.sass';\n\nfunction App() {\n  return (\n    <HashRouter>\n      <Provider store={store}>\n        <ContentWrapper/>\n      </Provider>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// 'use strict'\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n","module.exports = __webpack_public_path__ + \"static/media/background-texture-white.9d490c1f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/car-cover.4244e9e3.png\";","module.exports = __webpack_public_path__ + \"static/media/bat-cover.38790e18.png\";","module.exports = __webpack_public_path__ + \"static/media/fish-cover.c3aff7ed.png\";","module.exports = __webpack_public_path__ + \"static/media/crowds-cover.ea99ec22.png\";","module.exports = __webpack_public_path__ + \"static/media/mold-cover.cf41b38c.png\";","module.exports = __webpack_public_path__ + \"static/media/car-instructions.b8a5fe30.png\";","module.exports = __webpack_public_path__ + \"static/media/bat-instructions.6cf6f199.png\";","module.exports = __webpack_public_path__ + \"static/media/fish-instructions.1c869886.png\";","module.exports = __webpack_public_path__ + \"static/media/crowds-instructions.7a9b88e2.png\";","module.exports = __webpack_public_path__ + \"static/media/mold-instructions.d5e09830.png\";","module.exports = __webpack_public_path__ + \"static/media/car-video.604b369b.mp4\";","module.exports = __webpack_public_path__ + \"static/media/bat-video.50b37050.mp4\";","module.exports = __webpack_public_path__ + \"static/media/fish-video.742bd61a.mp4\";","module.exports = __webpack_public_path__ + \"static/media/crowds-video.a6d15e39.mp4\";","module.exports = __webpack_public_path__ + \"static/media/mold-video.32a60998.mp4\";"],"sourceRoot":""}